# Advertorial Builder - Quick Feature Reference

## Project Overview
A 6-step wizard that helps users build advertorials. Users control the structure, AI generates the content.

## User Flow
```
Login ‚Üí Setup ‚Üí URLs ‚Üí Blocks ‚Üí Insights ‚Üí Review ‚Üí Generate ‚Üí Success
```

---

## Step 1: Campaign Setup
**What:** Define campaign basics  
**Inputs:**
- Topic (textarea)
- Campaign type (Lead Gen | E-commerce)
- Niche (10 options: Beauty, Finance, Health, etc.)
- Country (US | UK | Canada)
- Language (English)
- Word count (500-5000)
- Paragraph length (4 options)
- Compliance (None | ERGO | Custom with textarea)

**Button:** "Continue to Product Info" (disabled until all required fields filled)

---

## Step 2: Product Info
**What:** Add reference URLs to scrape  
**Inputs:** Unlimited URL fields with + Add / √ó Remove  
**Button:** "Scrape & Continue" ‚Üí Scraping starts in background ‚Üí Proceeds immediately to Step 3

**Behavior:**
- Scraping happens asynchronously in background (no blocking dialog)
- User can proceed to Building Blocks while scraping completes
- Scraping results available when user reaches Insights (Step 4)
- Status updates via Supabase Realtime subscriptions

**API:** `POST /api/scrape` creates campaign and triggers n8n webhook

---

## Step 3: Building Blocks
**What:** Drag & drop content blocks to build structure

**Layout:**
- **Top:** Campaign summary (read-only)
- **Left sidebar:** Available blocks (27 types in 6 categories)
- **Right area:** Structure (drag & drop zone)

**Block Categories (in sidebar order):**
1. **Opening:** Lede (3 variants), Teaser, Subheadline, Authority*
2. **Problem & Solution:** X Reasons*, Problem, Listicle, Solution, Mechanism, Concerns
3. **Benefits & Features:** Bullet Points (2 variants), Future Me
4. **Authority & Credibility:** Expert Testimonial, Trust Elements, Social Proof, Studies/Research*
5. **Urgency & CTA:** Call to Urgency, Scarcity, Discount*, Price Explainer, Next Steps, CTA
6. **Other:** FAQ, Image Placeholder

**Total:** 27 blocks

*Requires input field

**Interactions:**
- Drag block from left ‚Üí Drop in structure
- Or click + icon to add to bottom
- Reorder with drag handle (‚£ø)
- Remove with √ó button

**Tech:** @dnd-kit library  
**Button:** "Continue to Insights" (disabled if 0 blocks)

---

## Step 4: Insights
**What:** Select extracted insights from scraped pages  
**UI:** 5 collapsible categories with checkboxes:
1. **USPs** - Key selling points
2. **Pricing** - Price info
3. **Main Angle** - Messaging approach
4. **Tone of Voice** - Writing style
5. **Key Hooks** - Attention grabbers

**Features per category:**
- Multi-select checkboxes
- Inline edit (‚úèÔ∏è pencil icon)
- Delete (üóëÔ∏è trash icon)
- "Add your own" custom insights

**Loading State:**
- If scraping not complete when user reaches this step, shows "Finalizing Analysis" dialog
- Dialog uses "finalizing" variant with patient messaging ("Almost there...", "Processing final details...", etc.)
- Auto-populates when scraping completes via Supabase Realtime subscription
- Dialog automatically closes when `status: 'urls_processed'` received

**Validation:** At least 1 insight selected  
**Button:** "Continue to Review"

---

## Step 5: Review
**What:** Final check before generation

**5 Editable Sections:**
1. Topic - Inline edit
2. Campaign Setup - Inline edit (includes Custom compliance guidelines)
3. Reference Pages - Edit with warning (clears steps 3-4)
4. Structure - Navigate to Step 3
5. Insights - Navigate to Step 4

**Button:** "Generate Advertorial"

---

## Step 6: Generation & Success

**Loading:**
- Purple spinner
- "Generating Your Advertorial"
- ~30-60 seconds

**Success:**
- ‚úì Checkmark
- Document card with Google Doc link
- "Open in Google Docs" button
- "Create Another Advertorial" button

**API:** `POST /api/generate` with full campaign data

---

## Supporting Features

### Request History (Clock icon)
- Sidebar drawer from right
- List of past campaigns
- Shows: name, niche, country, date, Google Doc link

### Account Menu (User icon)
- Sidebar drawer from right
- Shows current email
- Sign out button

---

## Design System

**Colors:**
- Teal: #0dadb7 (icons, accents)
- Purple: #4644B6 (CTA buttons)
- Gray: #F6F6F6 (backgrounds)

**Icons:** Lucide React  
**Styling:** Tailwind + shadcn/ui  
**Font:** Inter

---

## State Management
Simple React useState in main container (`app/page.tsx`):
```typescript
const [currentStep, setCurrentStep] = useState(1);
const [campaignData, setCampaignData] = useState({
  step1: {}, step2: {}, step3: {}, step4: {}, step5: {}
});
```

---

## Current Status
‚úÖ Complete: All UI/UX, drag & drop, demo mode  
üöß Needed: Real auth, API integration, backend workflows

---

**Note:** This is a quick reference. Ask questions if you need details about any specific feature!