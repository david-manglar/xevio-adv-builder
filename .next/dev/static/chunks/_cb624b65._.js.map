{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/wearebrain/Desktop/Manglar%20Media/adv_builder/xevio-adv-builder/components/step-indicator.tsx"],"sourcesContent":["import { Check } from \"lucide-react\"\n\ninterface StepIndicatorProps {\n  currentStep: number\n}\n\nconst steps = [\n  { number: 1, title: \"Campaign Setup\", description: \"Define your campaign parameters\" },\n  { number: 2, title: \"Product Info\", description: \"Add reference pages\" },\n  { number: 3, title: \"Building Blocks\", description: \"Structure your advertorial\" },\n  { number: 4, title: \"Insights\", description: \"Select key insights & USPs\" },\n  { number: 5, title: \"Review\", description: \"Confirm and generate\" },\n]\n\nexport function StepIndicator({ currentStep }: StepIndicatorProps) {\n  return (\n    <div className=\"flex items-center justify-around gap-2\">\n      {steps.map((step) => (\n        <div key={step.number} className=\"flex items-center gap-3\">\n          <div\n            className={`flex h-10 w-10 shrink-0 items-center justify-center rounded-full border-2 transition-colors ${\n              currentStep > step.number\n                ? \"border-[#0dadb7] bg-[#0dadb7] text-white\"\n                : currentStep === step.number\n                  ? \"border-[#4644B6] bg-[#4644B6] text-white\"\n                  : \"border-border bg-card text-muted-foreground\"\n            }`}\n          >\n            {currentStep > step.number ? (\n              <Check className=\"h-5 w-5\" />\n            ) : (\n              <span className=\"text-sm font-semibold\">{step.number}</span>\n            )}\n          </div>\n          <div className=\"hidden md:block min-w-0\">\n            <p\n              className={`text-sm font-medium whitespace-nowrap ${\n                currentStep >= step.number ? \"text-foreground\" : \"text-muted-foreground\"\n              }`}\n            >\n              {step.title}\n            </p>\n            <p className=\"text-xs text-muted-foreground whitespace-nowrap\">{step.description}</p>\n          </div>\n        </div>\n      ))}\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAAA;;;AAMA,MAAM,QAAQ;IACZ;QAAE,QAAQ;QAAG,OAAO;QAAkB,aAAa;IAAkC;IACrF;QAAE,QAAQ;QAAG,OAAO;QAAgB,aAAa;IAAsB;IACvE;QAAE,QAAQ;QAAG,OAAO;QAAmB,aAAa;IAA6B;IACjF;QAAE,QAAQ;QAAG,OAAO;QAAY,aAAa;IAA6B;IAC1E;QAAE,QAAQ;QAAG,OAAO;QAAU,aAAa;IAAuB;CACnE;AAEM,SAAS,cAAc,EAAE,WAAW,EAAsB;IAC/D,qBACE,6LAAC;QAAI,WAAU;kBACZ,MAAM,GAAG,CAAC,CAAC,qBACV,6LAAC;gBAAsB,WAAU;;kCAC/B,6LAAC;wBACC,WAAW,CAAC,4FAA4F,EACtG,cAAc,KAAK,MAAM,GACrB,6CACA,gBAAgB,KAAK,MAAM,GACzB,6CACA,+CACN;kCAED,cAAc,KAAK,MAAM,iBACxB,6LAAC,gNAAK;4BAAC,WAAU;;;;;iDAEjB,6LAAC;4BAAK,WAAU;sCAAyB,KAAK,MAAM;;;;;;;;;;;kCAGxD,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCACC,WAAW,CAAC,sCAAsC,EAChD,eAAe,KAAK,MAAM,GAAG,oBAAoB,yBACjD;0CAED,KAAK,KAAK;;;;;;0CAEb,6LAAC;gCAAE,WAAU;0CAAmD,KAAK,WAAW;;;;;;;;;;;;;eAxB1E,KAAK,MAAM;;;;;;;;;;AA8B7B;KAlCgB"}},
    {"offset": {"line": 113, "column": 0}, "map": {"version":3,"sources":["file:///Users/wearebrain/Desktop/Manglar%20Media/adv_builder/xevio-adv-builder/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from 'clsx'\nimport { twMerge } from 'tailwind-merge'\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,yKAAO,EAAC,IAAA,gJAAI,EAAC;AACtB"}},
    {"offset": {"line": 131, "column": 0}, "map": {"version":3,"sources":["file:///Users/wearebrain/Desktop/Manglar%20Media/adv_builder/xevio-adv-builder/components/ui/card.tsx"],"sourcesContent":["import * as React from 'react'\n\nimport { cn } from '@/lib/utils'\n\nfunction Card({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card\"\n      className={cn(\n        'bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardHeader({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-header\"\n      className={cn(\n        '@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardTitle({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-title\"\n      className={cn('leading-none font-semibold', className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardDescription({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-description\"\n      className={cn('text-muted-foreground text-sm', className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardAction({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-action\"\n      className={cn(\n        'col-start-2 row-span-2 row-start-1 self-start justify-self-end',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardContent({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-content\"\n      className={cn('px-6', className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardFooter({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-footer\"\n      className={cn('flex items-center px-6 [.border-t]:pt-6', className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardAction,\n  CardDescription,\n  CardContent,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAEA;;;AAEA,SAAS,KAAK,EAAE,SAAS,EAAE,GAAG,OAAoC;IAChE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,qFACA;QAED,GAAG,KAAK;;;;;;AAGf;KAXS;AAaT,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,4JACA;QAED,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAoC;IACrE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,gBAAgB,EAAE,SAAS,EAAE,GAAG,OAAoC;IAC3E,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,kEACA;QAED,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAoC;IACvE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,QAAQ;QACrB,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,2CAA2C;QACxD,GAAG,KAAK;;;;;;AAGf;MARS"}},
    {"offset": {"line": 251, "column": 0}, "map": {"version":3,"sources":["file:///Users/wearebrain/Desktop/Manglar%20Media/adv_builder/xevio-adv-builder/components/ui/button.tsx"],"sourcesContent":["import * as React from 'react'\nimport { Slot } from '@radix-ui/react-slot'\nimport { cva, type VariantProps } from 'class-variance-authority'\n\nimport { cn } from '@/lib/utils'\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\n  {\n    variants: {\n      variant: {\n        default: 'bg-primary text-primary-foreground hover:bg-primary/90',\n        destructive:\n          'bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60',\n        outline:\n          'border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50',\n        secondary:\n          'bg-secondary text-secondary-foreground hover:bg-secondary/80',\n        ghost:\n          'hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50',\n        link: 'text-primary underline-offset-4 hover:underline',\n      },\n      size: {\n        default: 'h-9 px-4 py-2 has-[>svg]:px-3',\n        sm: 'h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5',\n        lg: 'h-10 rounded-md px-6 has-[>svg]:px-4',\n        icon: 'size-9',\n        'icon-sm': 'size-8',\n        'icon-lg': 'size-10',\n      },\n    },\n    defaultVariants: {\n      variant: 'default',\n      size: 'default',\n    },\n  },\n)\n\nfunction Button({\n  className,\n  variant,\n  size,\n  asChild = false,\n  ...props\n}: React.ComponentProps<'button'> &\n  VariantProps<typeof buttonVariants> & {\n    asChild?: boolean\n  }) {\n  const Comp = asChild ? Slot : 'button'\n\n  return (\n    <Comp\n      data-slot=\"button\"\n      className={cn(buttonVariants({ variant, size, className }))}\n      {...props}\n    />\n  )\n}\n\nexport { Button, buttonVariants }\n"],"names":[],"mappings":";;;;;;;AACA;AACA;AAEA;;;;;AAEA,MAAM,iBAAiB,IAAA,0KAAG,EACxB,+bACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OACE;YACF,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;YACN,WAAW;YACX,WAAW;QACb;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AAGF,SAAS,OAAO,EACd,SAAS,EACT,OAAO,EACP,IAAI,EACJ,UAAU,KAAK,EACf,GAAG,OAIF;IACD,MAAM,OAAO,UAAU,2KAAI,GAAG;IAE9B,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACvD,GAAG,KAAK;;;;;;AAGf;KAnBS"}},
    {"offset": {"line": 316, "column": 0}, "map": {"version":3,"sources":["file:///Users/wearebrain/Desktop/Manglar%20Media/adv_builder/xevio-adv-builder/components/ui/label.tsx"],"sourcesContent":["'use client'\n\nimport * as React from 'react'\nimport * as LabelPrimitive from '@radix-ui/react-label'\n\nimport { cn } from '@/lib/utils'\n\nfunction Label({\n  className,\n  ...props\n}: React.ComponentProps<typeof LabelPrimitive.Root>) {\n  return (\n    <LabelPrimitive.Root\n      data-slot=\"label\"\n      className={cn(\n        'flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Label }\n"],"names":[],"mappings":";;;;;AAGA;AAEA;AALA;;;;AAOA,SAAS,MAAM,EACb,SAAS,EACT,GAAG,OAC8C;IACjD,qBACE,6LAAC,4KAAmB;QAClB,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,uNACA;QAED,GAAG,KAAK;;;;;;AAGf;KAdS"}},
    {"offset": {"line": 349, "column": 0}, "map": {"version":3,"sources":["file:///Users/wearebrain/Desktop/Manglar%20Media/adv_builder/xevio-adv-builder/components/ui/input.tsx"],"sourcesContent":["import * as React from 'react'\n\nimport { cn } from '@/lib/utils'\n\nfunction Input({ className, type, ...props }: React.ComponentProps<'input'>) {\n  return (\n    <input\n      type={type}\n      data-slot=\"input\"\n      className={cn(\n        'file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm',\n        'focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]',\n        'aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Input }\n"],"names":[],"mappings":";;;;;AAEA;;;AAEA,SAAS,MAAM,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAsC;IACzE,qBACE,6LAAC;QACC,MAAM;QACN,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,8bACA,iFACA,0GACA;QAED,GAAG,KAAK;;;;;;AAGf;KAdS"}},
    {"offset": {"line": 380, "column": 0}, "map": {"version":3,"sources":["file:///Users/wearebrain/Desktop/Manglar%20Media/adv_builder/xevio-adv-builder/components/ui/textarea.tsx"],"sourcesContent":["import * as React from 'react'\n\nimport { cn } from '@/lib/utils'\n\nfunction Textarea({ className, ...props }: React.ComponentProps<'textarea'>) {\n  return (\n    <textarea\n      data-slot=\"textarea\"\n      className={cn(\n        'border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Textarea }\n"],"names":[],"mappings":";;;;;AAEA;;;AAEA,SAAS,SAAS,EAAE,SAAS,EAAE,GAAG,OAAyC;IACzE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,ucACA;QAED,GAAG,KAAK;;;;;;AAGf;KAXS"}},
    {"offset": {"line": 410, "column": 0}, "map": {"version":3,"sources":["file:///Users/wearebrain/Desktop/Manglar%20Media/adv_builder/xevio-adv-builder/components/ui/select.tsx"],"sourcesContent":["'use client'\n\nimport * as React from 'react'\nimport * as SelectPrimitive from '@radix-ui/react-select'\nimport { CheckIcon, ChevronDownIcon, ChevronUpIcon } from 'lucide-react'\n\nimport { cn } from '@/lib/utils'\n\nfunction Select({\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Root>) {\n  return <SelectPrimitive.Root data-slot=\"select\" {...props} />\n}\n\nfunction SelectGroup({\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Group>) {\n  return <SelectPrimitive.Group data-slot=\"select-group\" {...props} />\n}\n\nfunction SelectValue({\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Value>) {\n  return <SelectPrimitive.Value data-slot=\"select-value\" {...props} />\n}\n\nfunction SelectTrigger({\n  className,\n  size = 'default',\n  children,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Trigger> & {\n  size?: 'sm' | 'default'\n}) {\n  return (\n    <SelectPrimitive.Trigger\n      data-slot=\"select-trigger\"\n      data-size={size}\n      className={cn(\n        \"border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\n        className,\n      )}\n      {...props}\n    >\n      {children}\n      <SelectPrimitive.Icon asChild>\n        <ChevronDownIcon className=\"size-4 opacity-50\" />\n      </SelectPrimitive.Icon>\n    </SelectPrimitive.Trigger>\n  )\n}\n\nfunction SelectContent({\n  className,\n  children,\n  position = 'popper',\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Content>) {\n  return (\n    <SelectPrimitive.Portal>\n      <SelectPrimitive.Content\n        data-slot=\"select-content\"\n        className={cn(\n          'bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md',\n          position === 'popper' &&\n            'data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1',\n          className,\n        )}\n        position={position}\n        {...props}\n      >\n        <SelectScrollUpButton />\n        <SelectPrimitive.Viewport\n          className={cn(\n            'p-1',\n            position === 'popper' &&\n              'h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1',\n          )}\n        >\n          {children}\n        </SelectPrimitive.Viewport>\n        <SelectScrollDownButton />\n      </SelectPrimitive.Content>\n    </SelectPrimitive.Portal>\n  )\n}\n\nfunction SelectLabel({\n  className,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Label>) {\n  return (\n    <SelectPrimitive.Label\n      data-slot=\"select-label\"\n      className={cn('text-muted-foreground px-2 py-1.5 text-xs', className)}\n      {...props}\n    />\n  )\n}\n\nfunction SelectItem({\n  className,\n  children,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Item>) {\n  return (\n    <SelectPrimitive.Item\n      data-slot=\"select-item\"\n      className={cn(\n        \"focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2\",\n        className,\n      )}\n      {...props}\n    >\n      <span className=\"absolute right-2 flex size-3.5 items-center justify-center\">\n        <SelectPrimitive.ItemIndicator>\n          <CheckIcon className=\"size-4\" />\n        </SelectPrimitive.ItemIndicator>\n      </span>\n      <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n    </SelectPrimitive.Item>\n  )\n}\n\nfunction SelectSeparator({\n  className,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Separator>) {\n  return (\n    <SelectPrimitive.Separator\n      data-slot=\"select-separator\"\n      className={cn('bg-border pointer-events-none -mx-1 my-1 h-px', className)}\n      {...props}\n    />\n  )\n}\n\nfunction SelectScrollUpButton({\n  className,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.ScrollUpButton>) {\n  return (\n    <SelectPrimitive.ScrollUpButton\n      data-slot=\"select-scroll-up-button\"\n      className={cn(\n        'flex cursor-default items-center justify-center py-1',\n        className,\n      )}\n      {...props}\n    >\n      <ChevronUpIcon className=\"size-4\" />\n    </SelectPrimitive.ScrollUpButton>\n  )\n}\n\nfunction SelectScrollDownButton({\n  className,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.ScrollDownButton>) {\n  return (\n    <SelectPrimitive.ScrollDownButton\n      data-slot=\"select-scroll-down-button\"\n      className={cn(\n        'flex cursor-default items-center justify-center py-1',\n        className,\n      )}\n      {...props}\n    >\n      <ChevronDownIcon className=\"size-4\" />\n    </SelectPrimitive.ScrollDownButton>\n  )\n}\n\nexport {\n  Select,\n  SelectContent,\n  SelectGroup,\n  SelectItem,\n  SelectLabel,\n  SelectScrollDownButton,\n  SelectScrollUpButton,\n  SelectSeparator,\n  SelectTrigger,\n  SelectValue,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAGA;AACA;AAAA;AAAA;AAEA;AANA;;;;;AAQA,SAAS,OAAO,EACd,GAAG,OAC+C;IAClD,qBAAO,6LAAC,6KAAoB;QAAC,aAAU;QAAU,GAAG,KAAK;;;;;;AAC3D;KAJS;AAMT,SAAS,YAAY,EACnB,GAAG,OACgD;IACnD,qBAAO,6LAAC,8KAAqB;QAAC,aAAU;QAAgB,GAAG,KAAK;;;;;;AAClE;MAJS;AAMT,SAAS,YAAY,EACnB,GAAG,OACgD;IACnD,qBAAO,6LAAC,8KAAqB;QAAC,aAAU;QAAgB,GAAG,KAAK;;;;;;AAClE;MAJS;AAMT,SAAS,cAAc,EACrB,SAAS,EACT,OAAO,SAAS,EAChB,QAAQ,EACR,GAAG,OAGJ;IACC,qBACE,6LAAC,gLAAuB;QACtB,aAAU;QACV,aAAW;QACX,WAAW,IAAA,qHAAE,EACX,gzBACA;QAED,GAAG,KAAK;;YAER;0BACD,6LAAC,6KAAoB;gBAAC,OAAO;0BAC3B,cAAA,6LAAC,8OAAe;oBAAC,WAAU;;;;;;;;;;;;;;;;;AAInC;MAxBS;AA0BT,SAAS,cAAc,EACrB,SAAS,EACT,QAAQ,EACR,WAAW,QAAQ,EACnB,GAAG,OACkD;IACrD,qBACE,6LAAC,+KAAsB;kBACrB,cAAA,6LAAC,gLAAuB;YACtB,aAAU;YACV,WAAW,IAAA,qHAAE,EACX,ijBACA,aAAa,YACX,mIACF;YAEF,UAAU;YACT,GAAG,KAAK;;8BAET,6LAAC;;;;;8BACD,6LAAC,iLAAwB;oBACvB,WAAW,IAAA,qHAAE,EACX,OACA,aAAa,YACX;8BAGH;;;;;;8BAEH,6LAAC;;;;;;;;;;;;;;;;AAIT;MAjCS;AAmCT,SAAS,YAAY,EACnB,SAAS,EACT,GAAG,OACgD;IACnD,qBACE,6LAAC,8KAAqB;QACpB,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,6CAA6C;QAC1D,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,WAAW,EAClB,SAAS,EACT,QAAQ,EACR,GAAG,OAC+C;IAClD,qBACE,6LAAC,6KAAoB;QACnB,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,6aACA;QAED,GAAG,KAAK;;0BAET,6LAAC;gBAAK,WAAU;0BACd,cAAA,6LAAC,sLAA6B;8BAC5B,cAAA,6LAAC,wNAAS;wBAAC,WAAU;;;;;;;;;;;;;;;;0BAGzB,6LAAC,iLAAwB;0BAAE;;;;;;;;;;;;AAGjC;MAtBS;AAwBT,SAAS,gBAAgB,EACvB,SAAS,EACT,GAAG,OACoD;IACvD,qBACE,6LAAC,kLAAyB;QACxB,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,iDAAiD;QAC9D,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,qBAAqB,EAC5B,SAAS,EACT,GAAG,OACyD;IAC5D,qBACE,6LAAC,uLAA8B;QAC7B,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,wDACA;QAED,GAAG,KAAK;kBAET,cAAA,6LAAC,wOAAa;YAAC,WAAU;;;;;;;;;;;AAG/B;MAhBS;AAkBT,SAAS,uBAAuB,EAC9B,SAAS,EACT,GAAG,OAC2D;IAC9D,qBACE,6LAAC,yLAAgC;QAC/B,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,wDACA;QAED,GAAG,KAAK;kBAET,cAAA,6LAAC,8OAAe;YAAC,WAAU;;;;;;;;;;;AAGjC;MAhBS"}},
    {"offset": {"line": 667, "column": 0}, "map": {"version":3,"sources":["file:///Users/wearebrain/Desktop/Manglar%20Media/adv_builder/xevio-adv-builder/components/step-one.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState } from \"react\"\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\"\nimport { Button } from \"@/components/ui/button\"\nimport { Label } from \"@/components/ui/label\"\nimport { Input } from \"@/components/ui/input\"\nimport { Textarea } from \"@/components/ui/textarea\"\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\"\nimport {\n  AlertDialog,\n  AlertDialogContent,\n  AlertDialogHeader,\n  AlertDialogTitle,\n  AlertDialogDescription,\n  AlertDialogFooter,\n  AlertDialogCancel,\n  AlertDialogAction,\n} from \"@/components/ui/alert-dialog\"\nimport { Globe, FileText, Shield, Lightbulb, AlertTriangle } from \"lucide-react\"\nimport { StepOneState, CampaignData } from \"@/lib/types\"\nimport { cn } from \"@/lib/utils\"\nimport { hasStepOneChanges } from \"@/lib/url-utils\"\n\ninterface StepOneProps {\n  data: StepOneState\n  updateData: (data: StepOneState) => void\n  onNext: () => void\n  campaignData: CampaignData  // NEW: Access existing campaign data\n}\n\nexport function StepOne({ data, updateData, onNext, campaignData }: StepOneProps) {\n  const [errors, setErrors] = useState<Partial<Record<keyof StepOneState, boolean>>>({})\n  const [showRescrapeWarning, setShowRescrapeWarning] = useState(false)\n\n  const validate = () => {\n    const newErrors: Partial<Record<keyof StepOneState, boolean>> = {}\n    let isValid = true\n\n    const mandatoryFields: (keyof StepOneState)[] = [\n      \"topic\",\n      \"campaignType\",\n      \"niche\",\n      \"country\",\n      \"language\",\n      \"length\",\n      \"paragraphLength\",\n      \"guidelines\",\n    ]\n\n    mandatoryFields.forEach((key) => {\n      if (!data[key] || data[key].trim() === \"\") {\n        newErrors[key] = true\n        isValid = false\n      }\n    })\n\n    // If Custom is selected, customGuidelines is required\n    if (data.guidelines === \"Custom\" && (!data.customGuidelines || data.customGuidelines.trim() === \"\")) {\n      newErrors.customGuidelines = true\n      isValid = false\n    }\n\n    setErrors(newErrors)\n    return isValid\n  }\n\n  const handleNext = () => {\n    if (validate()) {\n      onNext()\n    }\n  }\n\n  const clearError = (field: keyof StepOneState) => {\n    if (errors[field]) {\n      setErrors((prev) => ({ ...prev, [field]: undefined }))\n    }\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Advertorial Topic */}\n      <Card>\n        <CardHeader className=\"pb-4\">\n          <div className=\"flex items-center gap-2\">\n            <Lightbulb className=\"h-5 w-5 text-[#0dadb7]\" />\n            <CardTitle className=\"text-base\">Advertorial Topic</CardTitle>\n          </div>\n          <CardDescription>Describe in plain language what your advertorial is about</CardDescription>\n        </CardHeader>\n        <CardContent>\n          <div className=\"space-y-3\">\n            <Label htmlFor=\"topic\">\n              Topic <span className=\"text-destructive\">*</span>\n            </Label>\n            <Textarea\n              id=\"topic\"\n              placeholder=\"Describe the topic of your advertorial in detail...\"\n              className={cn(\"min-h-[120px] resize-y\", errors.topic && \"border-destructive\")}\n              value={data.topic}\n              onChange={(e) => {\n                updateData({ ...data, topic: e.target.value })\n                clearError(\"topic\")\n              }}\n            />\n            {errors.topic && <p className=\"text-sm text-destructive\">This field is required</p>}\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Campaign Type & Geo */}\n      <Card>\n        <CardHeader className=\"pb-4\">\n          <div className=\"flex items-center gap-2\">\n            <Globe className=\"h-5 w-5 text-[#0dadb7]\" />\n            <CardTitle className=\"text-base\">Campaign Type & Geo</CardTitle>\n          </div>\n          <CardDescription>Define your campaign's market and type</CardDescription>\n        </CardHeader>\n        <CardContent>\n          <div className=\"grid gap-4 sm:grid-cols-2 lg:grid-cols-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"campaign-type\">\n                Campaign Type <span className=\"text-destructive\">*</span>\n              </Label>\n              <Select\n                value={data.campaignType}\n                onValueChange={(v) => {\n                  updateData({ ...data, campaignType: v })\n                  clearError(\"campaignType\")\n                }}\n              >\n                <SelectTrigger id=\"campaign-type\" className={cn(errors.campaignType && \"border-destructive\")}>\n                  <SelectValue placeholder=\"Select\" />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"Lead Generation\">Lead Generation</SelectItem>\n                  <SelectItem value=\"E-commerce\">E-commerce</SelectItem>\n                </SelectContent>\n              </Select>\n              {errors.campaignType && <p className=\"text-sm text-destructive\">Required</p>}\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"niche\">\n                Campaign Niche <span className=\"text-destructive\">*</span>\n              </Label>\n              <Select\n                value={data.niche}\n                onValueChange={(v) => {\n                  updateData({ ...data, niche: v })\n                  clearError(\"niche\")\n                }}\n              >\n                <SelectTrigger id=\"niche\" className={cn(errors.niche && \"border-destructive\")}>\n                  <SelectValue placeholder=\"Select\" />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"Beauty\">Beauty</SelectItem>\n                  <SelectItem value=\"Education\">Education</SelectItem>\n                  <SelectItem value=\"Fashion/Clothing\">Fashion/Clothing</SelectItem>\n                  <SelectItem value=\"Finance/Insurance\">Finance/Insurance</SelectItem>\n                  <SelectItem value=\"Gaming\">Gaming</SelectItem>\n                  <SelectItem value=\"Health Supplements\">Health Supplements</SelectItem>\n                  <SelectItem value=\"Home Improvement\">Home Improvement</SelectItem>\n                  <SelectItem value=\"Medical\">Medical</SelectItem>\n                  <SelectItem value=\"Tech/Gadgets\">Tech/Gadgets</SelectItem>\n                  <SelectItem value=\"Weight Loss\">Weight Loss</SelectItem>\n                </SelectContent>\n              </Select>\n              {errors.niche && <p className=\"text-sm text-destructive\">Required</p>}\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"country\">\n                Country <span className=\"text-destructive\">*</span>\n              </Label>\n              <Select\n                value={data.country}\n                onValueChange={(v) => {\n                  updateData({ ...data, country: v })\n                  clearError(\"country\")\n                }}\n              >\n                <SelectTrigger id=\"country\" className={cn(errors.country && \"border-destructive\")}>\n                  <SelectValue placeholder=\"Select\" />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"United States\">United States</SelectItem>\n                  <SelectItem value=\"United Kingdom\">United Kingdom</SelectItem>\n                  <SelectItem value=\"Canada\">Canada</SelectItem>\n                </SelectContent>\n              </Select>\n              {errors.country && <p className=\"text-sm text-destructive\">Required</p>}\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"language\">\n                Language <span className=\"text-destructive\">*</span>\n              </Label>\n              <Select\n                value={data.language}\n                onValueChange={(v) => {\n                  updateData({ ...data, language: v })\n                  clearError(\"language\")\n                }}\n              >\n                <SelectTrigger id=\"language\" className={cn(errors.language && \"border-destructive\")}>\n                  <SelectValue placeholder=\"Select\" />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"English\">English</SelectItem>\n                </SelectContent>\n              </Select>\n              {errors.language && <p className=\"text-sm text-destructive\">Required</p>}\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n\n      <div className=\"grid gap-6 lg:grid-cols-2\">\n        {/* Content & Style */}\n        <Card>\n          <CardHeader className=\"pb-4\">\n            <div className=\"flex items-center gap-2\">\n              <FileText className=\"h-5 w-5 text-[#0dadb7]\" />\n              <CardTitle className=\"text-base\">Content & Style</CardTitle>\n            </div>\n            <CardDescription>Configure content length and formatting</CardDescription>\n          </CardHeader>\n          <CardContent>\n            <div className=\"flex flex-wrap gap-6\">\n              <div className=\"space-y-2 w-[140px]\">\n                <Label htmlFor=\"length\">\n                  Length (words) <span className=\"text-destructive\">*</span>\n                </Label>\n                <Input\n                  id=\"length\"\n                  type=\"number\"\n                  placeholder=\"e.g., 1500\"\n                  className={cn(errors.length && \"border-destructive\")}\n                  value={data.length}\n                  onChange={(e) => {\n                    updateData({ ...data, length: e.target.value })\n                    clearError(\"length\")\n                  }}\n                />\n                {errors.length && <p className=\"text-sm text-destructive\">Required</p>}\n              </div>\n\n              <div className=\"space-y-2 flex-1 min-w-[180px]\">\n                <Label htmlFor=\"paragraph-length\">\n                  Paragraph Length <span className=\"text-destructive\">*</span>\n                </Label>\n                <Select\n                  value={data.paragraphLength}\n                  onValueChange={(v) => {\n                    updateData({ ...data, paragraphLength: v })\n                    clearError(\"paragraphLength\")\n                  }}\n                >\n                  <SelectTrigger id=\"paragraph-length\" className={cn(errors.paragraphLength && \"border-destructive\")}>\n                    <SelectValue placeholder=\"Select\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"Very Short (1 sentence)\">Very Short (1 sentence)</SelectItem>\n                    <SelectItem value=\"Short (1-3 lines)\">Short (1-3 lines)</SelectItem>\n                    <SelectItem value=\"Normal (3-4 lines)\">Normal (3-4 lines)</SelectItem>\n                    <SelectItem value=\"Long (4-6 lines)\">Long (4-6 lines)</SelectItem>\n                  </SelectContent>\n                </Select>\n                {errors.paragraphLength && <p className=\"text-sm text-destructive\">Required</p>}\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n\n        {/* Compliance */}\n        <Card>\n          <CardHeader className=\"pb-4\">\n            <div className=\"flex items-center gap-2\">\n              <Shield className=\"h-5 w-5 text-[#0dadb7]\" />\n              <CardTitle className=\"text-base\">Compliance</CardTitle>\n            </div>\n            <CardDescription>Indicate specific guidelines to follow</CardDescription>\n          </CardHeader>\n          <CardContent>\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"guidelines\">\n                Client Guidelines <span className=\"text-destructive\">*</span>\n              </Label>\n              <Select\n                value={data.guidelines}\n                onValueChange={(v) => {\n                  updateData({ \n                    ...data, \n                    guidelines: v,\n                    // Clear custom guidelines if switching away from Custom\n                    customGuidelines: v === \"Custom\" ? data.customGuidelines : undefined\n                  })\n                  clearError(\"guidelines\")\n                  clearError(\"customGuidelines\")\n                }}\n              >\n                <SelectTrigger id=\"guidelines\" className={cn(errors.guidelines && \"border-destructive\")}>\n                  <SelectValue placeholder=\"Select\" />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"None\">None</SelectItem>\n                  <SelectItem value=\"ERGO\">ERGO</SelectItem>\n                  <SelectItem value=\"Custom\">Custom</SelectItem>\n                </SelectContent>\n              </Select>\n              {errors.guidelines && <p className=\"text-sm text-destructive\">Required</p>}\n              \n              {data.guidelines === \"Custom\" && (\n                <div className=\"mt-3 space-y-2\">\n                  <Label htmlFor=\"custom-guidelines\">\n                    Custom Guidelines <span className=\"text-destructive\">*</span>\n                  </Label>\n                  <Textarea\n                    id=\"custom-guidelines\"\n                    placeholder=\"e.g., 'Don't use word X' or 'Only communicate Bundle A'...\"\n                    className={cn(\"min-h-[100px] resize-y\", errors.customGuidelines && \"border-destructive\")}\n                    value={data.customGuidelines || \"\"}\n                    onChange={(e) => {\n                      updateData({ ...data, customGuidelines: e.target.value })\n                      clearError(\"customGuidelines\")\n                    }}\n                  />\n                  {errors.customGuidelines && <p className=\"text-sm text-destructive\">Required</p>}\n                </div>\n              )}\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Navigation */}\n      <div className=\"flex justify-end pt-4\">\n        <Button onClick={handleNext} size=\"lg\" className=\"bg-[#4644B6] hover:bg-[#3a38a0]\">\n          Continue to Product Info\n        </Button>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAWA;AAAA;AAAA;AAAA;AAEA;;;AArBA;;;;;;;;;;AA+BO,SAAS,QAAQ,EAAE,IAAI,EAAE,UAAU,EAAE,MAAM,EAAE,YAAY,EAAgB;;IAC9E,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,yKAAQ,EAA+C,CAAC;IACpF,MAAM,CAAC,qBAAqB,uBAAuB,GAAG,IAAA,yKAAQ,EAAC;IAE/D,MAAM,WAAW;QACf,MAAM,YAA0D,CAAC;QACjE,IAAI,UAAU;QAEd,MAAM,kBAA0C;YAC9C;YACA;YACA;YACA;YACA;YACA;YACA;YACA;SACD;QAED,gBAAgB,OAAO,CAAC,CAAC;YACvB,IAAI,CAAC,IAAI,CAAC,IAAI,IAAI,IAAI,CAAC,IAAI,CAAC,IAAI,OAAO,IAAI;gBACzC,SAAS,CAAC,IAAI,GAAG;gBACjB,UAAU;YACZ;QACF;QAEA,sDAAsD;QACtD,IAAI,KAAK,UAAU,KAAK,YAAY,CAAC,CAAC,KAAK,gBAAgB,IAAI,KAAK,gBAAgB,CAAC,IAAI,OAAO,EAAE,GAAG;YACnG,UAAU,gBAAgB,GAAG;YAC7B,UAAU;QACZ;QAEA,UAAU;QACV,OAAO;IACT;IAEA,MAAM,aAAa;QACjB,IAAI,YAAY;YACd;QACF;IACF;IAEA,MAAM,aAAa,CAAC;QAClB,IAAI,MAAM,CAAC,MAAM,EAAE;YACjB,UAAU,CAAC,OAAS,CAAC;oBAAE,GAAG,IAAI;oBAAE,CAAC,MAAM,EAAE;gBAAU,CAAC;QACtD;IACF;IAEA,qBACE,6LAAC;QAAI,WAAU;;0BAEb,6LAAC,oIAAI;;kCACH,6LAAC,0IAAU;wBAAC,WAAU;;0CACpB,6LAAC;gCAAI,WAAU;;kDACb,6LAAC,4NAAS;wCAAC,WAAU;;;;;;kDACrB,6LAAC,yIAAS;wCAAC,WAAU;kDAAY;;;;;;;;;;;;0CAEnC,6LAAC,+IAAe;0CAAC;;;;;;;;;;;;kCAEnB,6LAAC,2IAAW;kCACV,cAAA,6LAAC;4BAAI,WAAU;;8CACb,6LAAC,sIAAK;oCAAC,SAAQ;;wCAAQ;sDACf,6LAAC;4CAAK,WAAU;sDAAmB;;;;;;;;;;;;8CAE3C,6LAAC,4IAAQ;oCACP,IAAG;oCACH,aAAY;oCACZ,WAAW,IAAA,qHAAE,EAAC,0BAA0B,OAAO,KAAK,IAAI;oCACxD,OAAO,KAAK,KAAK;oCACjB,UAAU,CAAC;wCACT,WAAW;4CAAE,GAAG,IAAI;4CAAE,OAAO,EAAE,MAAM,CAAC,KAAK;wCAAC;wCAC5C,WAAW;oCACb;;;;;;gCAED,OAAO,KAAK,kBAAI,6LAAC;oCAAE,WAAU;8CAA2B;;;;;;;;;;;;;;;;;;;;;;;0BAM/D,6LAAC,oIAAI;;kCACH,6LAAC,0IAAU;wBAAC,WAAU;;0CACpB,6LAAC;gCAAI,WAAU;;kDACb,6LAAC,gNAAK;wCAAC,WAAU;;;;;;kDACjB,6LAAC,yIAAS;wCAAC,WAAU;kDAAY;;;;;;;;;;;;0CAEnC,6LAAC,+IAAe;0CAAC;;;;;;;;;;;;kCAEnB,6LAAC,2IAAW;kCACV,cAAA,6LAAC;4BAAI,WAAU;;8CACb,6LAAC;oCAAI,WAAU;;sDACb,6LAAC,sIAAK;4CAAC,SAAQ;;gDAAgB;8DACf,6LAAC;oDAAK,WAAU;8DAAmB;;;;;;;;;;;;sDAEnD,6LAAC,wIAAM;4CACL,OAAO,KAAK,YAAY;4CACxB,eAAe,CAAC;gDACd,WAAW;oDAAE,GAAG,IAAI;oDAAE,cAAc;gDAAE;gDACtC,WAAW;4CACb;;8DAEA,6LAAC,+IAAa;oDAAC,IAAG;oDAAgB,WAAW,IAAA,qHAAE,EAAC,OAAO,YAAY,IAAI;8DACrE,cAAA,6LAAC,6IAAW;wDAAC,aAAY;;;;;;;;;;;8DAE3B,6LAAC,+IAAa;;sEACZ,6LAAC,4IAAU;4DAAC,OAAM;sEAAkB;;;;;;sEACpC,6LAAC,4IAAU;4DAAC,OAAM;sEAAa;;;;;;;;;;;;;;;;;;wCAGlC,OAAO,YAAY,kBAAI,6LAAC;4CAAE,WAAU;sDAA2B;;;;;;;;;;;;8CAGlE,6LAAC;oCAAI,WAAU;;sDACb,6LAAC,sIAAK;4CAAC,SAAQ;;gDAAQ;8DACN,6LAAC;oDAAK,WAAU;8DAAmB;;;;;;;;;;;;sDAEpD,6LAAC,wIAAM;4CACL,OAAO,KAAK,KAAK;4CACjB,eAAe,CAAC;gDACd,WAAW;oDAAE,GAAG,IAAI;oDAAE,OAAO;gDAAE;gDAC/B,WAAW;4CACb;;8DAEA,6LAAC,+IAAa;oDAAC,IAAG;oDAAQ,WAAW,IAAA,qHAAE,EAAC,OAAO,KAAK,IAAI;8DACtD,cAAA,6LAAC,6IAAW;wDAAC,aAAY;;;;;;;;;;;8DAE3B,6LAAC,+IAAa;;sEACZ,6LAAC,4IAAU;4DAAC,OAAM;sEAAS;;;;;;sEAC3B,6LAAC,4IAAU;4DAAC,OAAM;sEAAY;;;;;;sEAC9B,6LAAC,4IAAU;4DAAC,OAAM;sEAAmB;;;;;;sEACrC,6LAAC,4IAAU;4DAAC,OAAM;sEAAoB;;;;;;sEACtC,6LAAC,4IAAU;4DAAC,OAAM;sEAAS;;;;;;sEAC3B,6LAAC,4IAAU;4DAAC,OAAM;sEAAqB;;;;;;sEACvC,6LAAC,4IAAU;4DAAC,OAAM;sEAAmB;;;;;;sEACrC,6LAAC,4IAAU;4DAAC,OAAM;sEAAU;;;;;;sEAC5B,6LAAC,4IAAU;4DAAC,OAAM;sEAAe;;;;;;sEACjC,6LAAC,4IAAU;4DAAC,OAAM;sEAAc;;;;;;;;;;;;;;;;;;wCAGnC,OAAO,KAAK,kBAAI,6LAAC;4CAAE,WAAU;sDAA2B;;;;;;;;;;;;8CAG3D,6LAAC;oCAAI,WAAU;;sDACb,6LAAC,sIAAK;4CAAC,SAAQ;;gDAAU;8DACf,6LAAC;oDAAK,WAAU;8DAAmB;;;;;;;;;;;;sDAE7C,6LAAC,wIAAM;4CACL,OAAO,KAAK,OAAO;4CACnB,eAAe,CAAC;gDACd,WAAW;oDAAE,GAAG,IAAI;oDAAE,SAAS;gDAAE;gDACjC,WAAW;4CACb;;8DAEA,6LAAC,+IAAa;oDAAC,IAAG;oDAAU,WAAW,IAAA,qHAAE,EAAC,OAAO,OAAO,IAAI;8DAC1D,cAAA,6LAAC,6IAAW;wDAAC,aAAY;;;;;;;;;;;8DAE3B,6LAAC,+IAAa;;sEACZ,6LAAC,4IAAU;4DAAC,OAAM;sEAAgB;;;;;;sEAClC,6LAAC,4IAAU;4DAAC,OAAM;sEAAiB;;;;;;sEACnC,6LAAC,4IAAU;4DAAC,OAAM;sEAAS;;;;;;;;;;;;;;;;;;wCAG9B,OAAO,OAAO,kBAAI,6LAAC;4CAAE,WAAU;sDAA2B;;;;;;;;;;;;8CAG7D,6LAAC;oCAAI,WAAU;;sDACb,6LAAC,sIAAK;4CAAC,SAAQ;;gDAAW;8DACf,6LAAC;oDAAK,WAAU;8DAAmB;;;;;;;;;;;;sDAE9C,6LAAC,wIAAM;4CACL,OAAO,KAAK,QAAQ;4CACpB,eAAe,CAAC;gDACd,WAAW;oDAAE,GAAG,IAAI;oDAAE,UAAU;gDAAE;gDAClC,WAAW;4CACb;;8DAEA,6LAAC,+IAAa;oDAAC,IAAG;oDAAW,WAAW,IAAA,qHAAE,EAAC,OAAO,QAAQ,IAAI;8DAC5D,cAAA,6LAAC,6IAAW;wDAAC,aAAY;;;;;;;;;;;8DAE3B,6LAAC,+IAAa;8DACZ,cAAA,6LAAC,4IAAU;wDAAC,OAAM;kEAAU;;;;;;;;;;;;;;;;;wCAG/B,OAAO,QAAQ,kBAAI,6LAAC;4CAAE,WAAU;sDAA2B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;0BAMpE,6LAAC;gBAAI,WAAU;;kCAEb,6LAAC,oIAAI;;0CACH,6LAAC,0IAAU;gCAAC,WAAU;;kDACpB,6LAAC;wCAAI,WAAU;;0DACb,6LAAC,6NAAQ;gDAAC,WAAU;;;;;;0DACpB,6LAAC,yIAAS;gDAAC,WAAU;0DAAY;;;;;;;;;;;;kDAEnC,6LAAC,+IAAe;kDAAC;;;;;;;;;;;;0CAEnB,6LAAC,2IAAW;0CACV,cAAA,6LAAC;oCAAI,WAAU;;sDACb,6LAAC;4CAAI,WAAU;;8DACb,6LAAC,sIAAK;oDAAC,SAAQ;;wDAAS;sEACP,6LAAC;4DAAK,WAAU;sEAAmB;;;;;;;;;;;;8DAEpD,6LAAC,sIAAK;oDACJ,IAAG;oDACH,MAAK;oDACL,aAAY;oDACZ,WAAW,IAAA,qHAAE,EAAC,OAAO,MAAM,IAAI;oDAC/B,OAAO,KAAK,MAAM;oDAClB,UAAU,CAAC;wDACT,WAAW;4DAAE,GAAG,IAAI;4DAAE,QAAQ,EAAE,MAAM,CAAC,KAAK;wDAAC;wDAC7C,WAAW;oDACb;;;;;;gDAED,OAAO,MAAM,kBAAI,6LAAC;oDAAE,WAAU;8DAA2B;;;;;;;;;;;;sDAG5D,6LAAC;4CAAI,WAAU;;8DACb,6LAAC,sIAAK;oDAAC,SAAQ;;wDAAmB;sEACf,6LAAC;4DAAK,WAAU;sEAAmB;;;;;;;;;;;;8DAEtD,6LAAC,wIAAM;oDACL,OAAO,KAAK,eAAe;oDAC3B,eAAe,CAAC;wDACd,WAAW;4DAAE,GAAG,IAAI;4DAAE,iBAAiB;wDAAE;wDACzC,WAAW;oDACb;;sEAEA,6LAAC,+IAAa;4DAAC,IAAG;4DAAmB,WAAW,IAAA,qHAAE,EAAC,OAAO,eAAe,IAAI;sEAC3E,cAAA,6LAAC,6IAAW;gEAAC,aAAY;;;;;;;;;;;sEAE3B,6LAAC,+IAAa;;8EACZ,6LAAC,4IAAU;oEAAC,OAAM;8EAA0B;;;;;;8EAC5C,6LAAC,4IAAU;oEAAC,OAAM;8EAAoB;;;;;;8EACtC,6LAAC,4IAAU;oEAAC,OAAM;8EAAqB;;;;;;8EACvC,6LAAC,4IAAU;oEAAC,OAAM;8EAAmB;;;;;;;;;;;;;;;;;;gDAGxC,OAAO,eAAe,kBAAI,6LAAC;oDAAE,WAAU;8DAA2B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;kCAO3E,6LAAC,oIAAI;;0CACH,6LAAC,0IAAU;gCAAC,WAAU;;kDACpB,6LAAC;wCAAI,WAAU;;0DACb,6LAAC,mNAAM;gDAAC,WAAU;;;;;;0DAClB,6LAAC,yIAAS;gDAAC,WAAU;0DAAY;;;;;;;;;;;;kDAEnC,6LAAC,+IAAe;kDAAC;;;;;;;;;;;;0CAEnB,6LAAC,2IAAW;0CACV,cAAA,6LAAC;oCAAI,WAAU;;sDACb,6LAAC,sIAAK;4CAAC,SAAQ;;gDAAa;8DACR,6LAAC;oDAAK,WAAU;8DAAmB;;;;;;;;;;;;sDAEvD,6LAAC,wIAAM;4CACL,OAAO,KAAK,UAAU;4CACtB,eAAe,CAAC;gDACd,WAAW;oDACT,GAAG,IAAI;oDACP,YAAY;oDACZ,wDAAwD;oDACxD,kBAAkB,MAAM,WAAW,KAAK,gBAAgB,GAAG;gDAC7D;gDACA,WAAW;gDACX,WAAW;4CACb;;8DAEA,6LAAC,+IAAa;oDAAC,IAAG;oDAAa,WAAW,IAAA,qHAAE,EAAC,OAAO,UAAU,IAAI;8DAChE,cAAA,6LAAC,6IAAW;wDAAC,aAAY;;;;;;;;;;;8DAE3B,6LAAC,+IAAa;;sEACZ,6LAAC,4IAAU;4DAAC,OAAM;sEAAO;;;;;;sEACzB,6LAAC,4IAAU;4DAAC,OAAM;sEAAO;;;;;;sEACzB,6LAAC,4IAAU;4DAAC,OAAM;sEAAS;;;;;;;;;;;;;;;;;;wCAG9B,OAAO,UAAU,kBAAI,6LAAC;4CAAE,WAAU;sDAA2B;;;;;;wCAE7D,KAAK,UAAU,KAAK,0BACnB,6LAAC;4CAAI,WAAU;;8DACb,6LAAC,sIAAK;oDAAC,SAAQ;;wDAAoB;sEACf,6LAAC;4DAAK,WAAU;sEAAmB;;;;;;;;;;;;8DAEvD,6LAAC,4IAAQ;oDACP,IAAG;oDACH,aAAY;oDACZ,WAAW,IAAA,qHAAE,EAAC,0BAA0B,OAAO,gBAAgB,IAAI;oDACnE,OAAO,KAAK,gBAAgB,IAAI;oDAChC,UAAU,CAAC;wDACT,WAAW;4DAAE,GAAG,IAAI;4DAAE,kBAAkB,EAAE,MAAM,CAAC,KAAK;wDAAC;wDACvD,WAAW;oDACb;;;;;;gDAED,OAAO,gBAAgB,kBAAI,6LAAC;oDAAE,WAAU;8DAA2B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;0BAShF,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC,wIAAM;oBAAC,SAAS;oBAAY,MAAK;oBAAK,WAAU;8BAAkC;;;;;;;;;;;;;;;;;AAM3F;GA3TgB;KAAA"}},
    {"offset": {"line": 1807, "column": 0}, "map": {"version":3,"sources":["file:///Users/wearebrain/Desktop/Manglar%20Media/adv_builder/xevio-adv-builder/components/ui/alert-dialog.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as AlertDialogPrimitive from \"@radix-ui/react-alert-dialog\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst AlertDialog = AlertDialogPrimitive.Root\n\nconst AlertDialogTrigger = AlertDialogPrimitive.Trigger\n\nconst AlertDialogPortal = AlertDialogPrimitive.Portal\n\nconst AlertDialogOverlay = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nAlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName\n\nconst AlertDialogContent = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPortal>\n    <AlertDialogOverlay />\n    <AlertDialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    />\n  </AlertDialogPortal>\n))\nAlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName\n\nconst AlertDialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogHeader.displayName = \"AlertDialogHeader\"\n\nconst AlertDialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogFooter.displayName = \"AlertDialogFooter\"\n\nconst AlertDialogTitle = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold\", className)}\n    {...props}\n  />\n))\nAlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName\n\nconst AlertDialogDescription = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nAlertDialogDescription.displayName =\n  AlertDialogPrimitive.Description.displayName\n\nconst AlertDialogAction = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Action>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Action>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Action\n    ref={ref}\n    className={cn(\n      // buttonVariants(),\n      \"inline-flex h-9 items-center justify-center rounded-md bg-primary px-4 py-2 text-sm font-medium text-primary-foreground shadow transition-colors hover:bg-primary/90 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50\",\n      className\n    )}\n    {...props}\n  />\n))\nAlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName\n\nconst AlertDialogCancel = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Cancel>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Cancel>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Cancel\n    ref={ref}\n    className={cn(\n      // buttonVariants({ variant: \"outline\" }),\n      \"mt-2 inline-flex h-9 items-center justify-center rounded-md border border-input bg-background px-4 py-2 text-sm font-medium shadow-sm transition-colors hover:bg-accent hover:text-accent-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 sm:mt-0\",\n      className\n    )}\n    {...props}\n  />\n))\nAlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName\n\nexport {\n  AlertDialog,\n  AlertDialogPortal,\n  AlertDialogOverlay,\n  AlertDialogTrigger,\n  AlertDialogContent,\n  AlertDialogHeader,\n  AlertDialogFooter,\n  AlertDialogTitle,\n  AlertDialogDescription,\n  AlertDialogAction,\n  AlertDialogCancel,\n}\n\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,MAAM,cAAc,sLAAyB;AAE7C,MAAM,qBAAqB,yLAA4B;AAEvD,MAAM,oBAAoB,wLAA2B;AAErD,MAAM,mCAAqB,2KAAgB,CAGzC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,yLAA4B;QAC3B,WAAW,IAAA,qHAAE,EACX,2JACA;QAED,GAAG,KAAK;QACT,KAAK;;;;;;KAVH;AAaN,mBAAmB,WAAW,GAAG,yLAA4B,CAAC,WAAW;AAEzE,MAAM,mCAAqB,2KAAgB,OAGzC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;;0BACC,6LAAC;;;;;0BACD,6LAAC,yLAA4B;gBAC3B,KAAK;gBACL,WAAW,IAAA,qHAAE,EACX,+fACA;gBAED,GAAG,KAAK;;;;;;;;;;;;;AAIf,mBAAmB,WAAW,GAAG,yLAA4B,CAAC,WAAW;AAEzE,MAAM,oBAAoB,CAAC,EACzB,SAAS,EACT,GAAG,OACkC,iBACrC,6LAAC;QACC,WAAW,IAAA,qHAAE,EACX,oDACA;QAED,GAAG,KAAK;;;;;;MATP;AAYN,kBAAkB,WAAW,GAAG;AAEhC,MAAM,oBAAoB,CAAC,EACzB,SAAS,EACT,GAAG,OACkC,iBACrC,6LAAC;QACC,WAAW,IAAA,qHAAE,EACX,iEACA;QAED,GAAG,KAAK;;;;;;MATP;AAYN,kBAAkB,WAAW,GAAG;AAEhC,MAAM,iCAAmB,2KAAgB,OAGvC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,uLAA0B;QACzB,KAAK;QACL,WAAW,IAAA,qHAAE,EAAC,yBAAyB;QACtC,GAAG,KAAK;;;;;;;AAGb,iBAAiB,WAAW,GAAG,uLAA0B,CAAC,WAAW;AAErE,MAAM,uCAAyB,2KAAgB,OAG7C,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,6LAAgC;QAC/B,KAAK;QACL,WAAW,IAAA,qHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;AAGb,uBAAuB,WAAW,GAChC,6LAAgC,CAAC,WAAW;AAE9C,MAAM,kCAAoB,2KAAgB,OAGxC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,wLAA2B;QAC1B,KAAK;QACL,WAAW,IAAA,qHAAE,EACX,oBAAoB;QACpB,iSACA;QAED,GAAG,KAAK;;;;;;;AAGb,kBAAkB,WAAW,GAAG,wLAA2B,CAAC,WAAW;AAEvE,MAAM,kCAAoB,2KAAgB,QAGxC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,wLAA2B;QAC1B,KAAK;QACL,WAAW,IAAA,qHAAE,EACX,0CAA0C;QAC1C,yUACA;QAED,GAAG,KAAK;;;;;;;AAGb,kBAAkB,WAAW,GAAG,wLAA2B,CAAC,WAAW"}},
    {"offset": {"line": 1966, "column": 0}, "map": {"version":3,"sources":["file:///Users/wearebrain/Desktop/Manglar%20Media/adv_builder/xevio-adv-builder/lib/url-utils.ts"],"sourcesContent":["import { ReferenceUrl } from './types'\n\nexport type UrlChangeType = 'none' | 'additions_only' | 'structural'\n\nexport interface UrlChangeResult {\n  changeType: UrlChangeType\n  newUrls: string[]\n}\n\n/**\n * Normalize a URL for comparison by trimming whitespace and removing trailing slashes\n */\nfunction normalizeUrl(url: string): string {\n  return url.trim().replace(/\\/+$/, '').toLowerCase()\n}\n\n/**\n * Extract URL strings from ReferenceUrl array\n */\nexport function extractUrls(referenceUrls: ReferenceUrl[]): string[] {\n  return referenceUrls\n    .map(ref => typeof ref === 'string' ? ref : ref?.url)\n    .filter((url): url is string => !!url && url.trim() !== '')\n    .map(normalizeUrl)\n}\n\n/**\n * Detect what type of URL changes occurred between current and scraped URLs\n * \n * @param currentUrls - Array of current URLs entered by user\n * @param scrapedUrls - Array of URLs that were previously scraped\n * @returns Object with changeType and array of new URLs (for additions_only case)\n * \n * Logic:\n * - 'none': Sets are identical, no changes needed\n * - 'additions_only': Current is a superset of scraped (only new URLs added)\n * - 'structural': URLs were deleted or modified, requires full re-scrape\n */\nexport function detectUrlChanges(\n  currentUrls: string[],\n  scrapedUrls: string[]\n): UrlChangeResult {\n  // Normalize all URLs for comparison\n  const currentSet = new Set(currentUrls.map(normalizeUrl))\n  const scrapedSet = new Set(scrapedUrls.map(normalizeUrl))\n\n  // If both are empty or identical, no changes\n  if (currentSet.size === 0 && scrapedSet.size === 0) {\n    return { changeType: 'none', newUrls: [] }\n  }\n\n  // Check if sets are identical\n  if (currentSet.size === scrapedSet.size) {\n    const allMatch = [...currentSet].every(url => scrapedSet.has(url))\n    if (allMatch) {\n      return { changeType: 'none', newUrls: [] }\n    }\n  }\n\n  // Check if all scraped URLs still exist in current (additions only)\n  const allScrapedStillExist = [...scrapedSet].every(url => currentSet.has(url))\n  \n  if (allScrapedStillExist) {\n    // Find new URLs (in current but not in scraped)\n    const newUrls = [...currentSet].filter(url => !scrapedSet.has(url))\n    \n    if (newUrls.length > 0) {\n      return { changeType: 'additions_only', newUrls }\n    }\n    \n    // No new URLs and all scraped exist = no changes\n    return { changeType: 'none', newUrls: [] }\n  }\n\n  // Some scraped URLs were removed or modified = structural change\n  return { changeType: 'structural', newUrls: [] }\n}\n\n/**\n * Compare two StepOneState objects to detect if there are meaningful changes\n * that would affect scraping (context-related fields)\n */\nexport function hasStepOneChanges(\n  current: { topic: string; niche: string; campaignType: string; country: string; language: string; guidelines: string },\n  original: { topic: string; niche: string; campaignType: string; country: string; language: string; guidelines: string } | null | undefined\n): boolean {\n  if (!original) return false\n  \n  // Compare fields that affect scraping context\n  return (\n    current.topic !== original.topic ||\n    current.niche !== original.niche ||\n    current.campaignType !== original.campaignType ||\n    current.country !== original.country ||\n    current.language !== original.language ||\n    current.guidelines !== original.guidelines\n  )\n}\n"],"names":[],"mappings":";;;;;;;;AASA;;CAEC,GACD,SAAS,aAAa,GAAW;IAC/B,OAAO,IAAI,IAAI,GAAG,OAAO,CAAC,QAAQ,IAAI,WAAW;AACnD;AAKO,SAAS,YAAY,aAA6B;IACvD,OAAO,cACJ,GAAG,CAAC,CAAA,MAAO,OAAO,QAAQ,WAAW,MAAM,KAAK,KAChD,MAAM,CAAC,CAAC,MAAuB,CAAC,CAAC,OAAO,IAAI,IAAI,OAAO,IACvD,GAAG,CAAC;AACT;AAcO,SAAS,iBACd,WAAqB,EACrB,WAAqB;IAErB,oCAAoC;IACpC,MAAM,aAAa,IAAI,IAAI,YAAY,GAAG,CAAC;IAC3C,MAAM,aAAa,IAAI,IAAI,YAAY,GAAG,CAAC;IAE3C,6CAA6C;IAC7C,IAAI,WAAW,IAAI,KAAK,KAAK,WAAW,IAAI,KAAK,GAAG;QAClD,OAAO;YAAE,YAAY;YAAQ,SAAS,EAAE;QAAC;IAC3C;IAEA,8BAA8B;IAC9B,IAAI,WAAW,IAAI,KAAK,WAAW,IAAI,EAAE;QACvC,MAAM,WAAW;eAAI;SAAW,CAAC,KAAK,CAAC,CAAA,MAAO,WAAW,GAAG,CAAC;QAC7D,IAAI,UAAU;YACZ,OAAO;gBAAE,YAAY;gBAAQ,SAAS,EAAE;YAAC;QAC3C;IACF;IAEA,oEAAoE;IACpE,MAAM,uBAAuB;WAAI;KAAW,CAAC,KAAK,CAAC,CAAA,MAAO,WAAW,GAAG,CAAC;IAEzE,IAAI,sBAAsB;QACxB,gDAAgD;QAChD,MAAM,UAAU;eAAI;SAAW,CAAC,MAAM,CAAC,CAAA,MAAO,CAAC,WAAW,GAAG,CAAC;QAE9D,IAAI,QAAQ,MAAM,GAAG,GAAG;YACtB,OAAO;gBAAE,YAAY;gBAAkB;YAAQ;QACjD;QAEA,iDAAiD;QACjD,OAAO;YAAE,YAAY;YAAQ,SAAS,EAAE;QAAC;IAC3C;IAEA,iEAAiE;IACjE,OAAO;QAAE,YAAY;QAAc,SAAS,EAAE;IAAC;AACjD;AAMO,SAAS,kBACd,OAAsH,EACtH,QAA0I;IAE1I,IAAI,CAAC,UAAU,OAAO;IAEtB,8CAA8C;IAC9C,OACE,QAAQ,KAAK,KAAK,SAAS,KAAK,IAChC,QAAQ,KAAK,KAAK,SAAS,KAAK,IAChC,QAAQ,YAAY,KAAK,SAAS,YAAY,IAC9C,QAAQ,OAAO,KAAK,SAAS,OAAO,IACpC,QAAQ,QAAQ,KAAK,SAAS,QAAQ,IACtC,QAAQ,UAAU,KAAK,SAAS,UAAU;AAE9C"}},
    {"offset": {"line": 2044, "column": 0}, "map": {"version":3,"sources":["file:///Users/wearebrain/Desktop/Manglar%20Media/adv_builder/xevio-adv-builder/components/step-two.tsx"],"sourcesContent":["\"use client\"\n\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\"\nimport { Button } from \"@/components/ui/button\"\nimport { Label } from \"@/components/ui/label\"\nimport { Input } from \"@/components/ui/input\"\nimport {\n  AlertDialog,\n  AlertDialogContent,\n  AlertDialogHeader,\n  AlertDialogTitle,\n  AlertDialogDescription,\n  AlertDialogFooter,\n  AlertDialogCancel,\n  AlertDialogAction,\n} from \"@/components/ui/alert-dialog\"\nimport { Link, Loader2, Plus, X, AlertTriangle } from \"lucide-react\"\nimport { StepOneState, StepTwoState, CampaignData } from \"@/lib/types\"\nimport { useState } from \"react\"\nimport { detectUrlChanges, extractUrls, hasStepOneChanges } from \"@/lib/url-utils\"\n\ninterface StepTwoProps {\n  stepOneData: StepOneState\n  data: StepTwoState\n  updateData: (data: StepTwoState) => void\n  onNext: () => void\n  onBack: () => void\n  isLoading: boolean\n  onCampaignCreated: (data: CampaignData) => void\n  onResetInsights: () => void  // NEW: Reset Step 4 insights on full re-scrape\n  userId: string | null\n  campaignData: CampaignData  // NEW: Access existing campaign data\n}\n\nexport function StepTwo({\n  stepOneData,\n  data,\n  updateData,\n  onNext,\n  onBack,\n  isLoading,\n  onCampaignCreated,\n  onResetInsights,\n  userId,\n  campaignData,\n}: StepTwoProps) {\n  const [isStartingScrape, setIsStartingScrape] = useState(false)\n  const [showRescrapeWarning, setShowRescrapeWarning] = useState(false)\n  const [pendingAction, setPendingAction] = useState<'structural' | 'step1_change' | null>(null)\n\n  // Determine if we need to re-scrape based on URL or Step 1 changes\n  const determineAction = () => {\n    const currentUrls = extractUrls(data.referenceUrls)\n    const scrapedUrls = campaignData.scrapedUrls || []\n    \n    // Check for Step 1 changes first\n    const step1Changed = hasStepOneChanges(stepOneData, campaignData.scrapedStepOneData)\n    \n    // If no campaign exists yet or no scraping has been done, always do full scrape\n    if (!campaignData.id || scrapedUrls.length === 0) {\n      return { action: 'full_scrape' as const, newUrls: currentUrls }\n    }\n    \n    // Detect URL changes\n    const urlChange = detectUrlChanges(currentUrls, scrapedUrls)\n    \n    // Step 1 changed = structural change requiring full re-scrape\n    if (step1Changed) {\n      return { action: 'structural_step1' as const, newUrls: [] }\n    }\n    \n    // URL changes\n    switch (urlChange.changeType) {\n      case 'none':\n        return { action: 'skip' as const, newUrls: [] }\n      case 'additions_only':\n        return { action: 'incremental' as const, newUrls: urlChange.newUrls }\n      case 'structural':\n        return { action: 'structural_url' as const, newUrls: [] }\n    }\n  }\n\n  const handleNext = async () => {\n    const decision = determineAction()\n    \n    // No scraping needed - just proceed\n    if (decision.action === 'skip') {\n      onNext()\n      return\n    }\n    \n    // Structural changes require warning dialog\n    if (decision.action === 'structural_url') {\n      setPendingAction('structural')\n      setShowRescrapeWarning(true)\n      return\n    }\n    \n    if (decision.action === 'structural_step1') {\n      setPendingAction('step1_change')\n      setShowRescrapeWarning(true)\n      return\n    }\n    \n    // Full scrape (new campaign) or incremental - proceed with API call\n    await performScrape(decision.action === 'incremental' ? decision.newUrls : null)\n  }\n\n  const handleConfirmRescrape = async () => {\n    setShowRescrapeWarning(false)\n    setPendingAction(null)\n    \n    // Reset insights since we're doing full re-scrape\n    onResetInsights()\n    \n    // Perform full re-scrape\n    await performScrape(null, true)\n  }\n\n  const performScrape = async (newUrlsOnly: string[] | null, isFullRescrape: boolean = false) => {\n    setIsStartingScrape(true)\n    \n    try {\n      const response = await fetch(\"/api/scrape\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          stepOneData,\n          stepTwoData: data,\n          userId,\n          // Include campaign ID if updating existing campaign\n          campaignId: campaignData.id || undefined,\n          // Include only new URLs for incremental scrape\n          newUrlsOnly: newUrlsOnly || undefined,\n          // Flag for full re-scrape (clears existing results)\n          isFullRescrape: isFullRescrape || undefined,\n        }),\n      })\n\n      const result = await response.json()\n\n      if (!response.ok) {\n        throw new Error(result.error || \"Failed to start scraping\")\n      }\n\n      const campaignId = result.campaignId\n      const currentUrls = extractUrls(data.referenceUrls)\n      \n      // Update campaign data with the new/updated campaign ID and scraping status\n      onCampaignCreated({ \n        id: campaignId, \n        status: \"scraping\",\n        scrapedUrls: currentUrls,\n        scrapedStepOneData: { ...stepOneData },\n        // Keep existing results if incremental, clear if full re-scrape\n        scrapingResult: (newUrlsOnly && !isFullRescrape) ? campaignData.scrapingResult : undefined,\n      })\n      \n      // Proceed immediately to next step - scraping happens in background\n      onNext()\n\n    } catch (error) {\n      console.error(\"Error starting scrape:\", error)\n      setIsStartingScrape(false)\n      alert(\"Something went wrong starting the process.\")\n    }\n  }\n\n  // Check if a string is a valid URL\n  const isValidUrl = (urlString: string): boolean => {\n    if (!urlString || urlString.trim() === \"\") return false\n    try {\n      const url = new URL(urlString)\n      return url.protocol === \"http:\" || url.protocol === \"https:\"\n    } catch {\n      return false\n    }\n  }\n\n  // Check if at least one valid URL exists\n  const hasValidUrl = data.referenceUrls.some((ref) => isValidUrl(ref.url))\n\n  const addUrlField = () => {\n    updateData({ ...data, referenceUrls: [...data.referenceUrls, { url: \"\", description: \"\" }] })\n  }\n\n  const removeUrlField = (index: number) => {\n    updateData({\n      ...data,\n      referenceUrls: data.referenceUrls.filter((_, i) => i !== index),\n    })\n  }\n\n  const updateUrl = (index: number, value: string) => {\n    const updated = [...data.referenceUrls]\n    updated[index] = { ...updated[index], url: value }\n    updateData({ ...data, referenceUrls: updated })\n  }\n\n  const updateDescription = (index: number, value: string) => {\n    const updated = [...data.referenceUrls]\n    updated[index] = { ...updated[index], description: value }\n    updateData({ ...data, referenceUrls: updated })\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Reference Pages Section */}\n      <Card>\n        <CardHeader className=\"pb-4\">\n          <div className=\"flex items-center gap-2\">\n            <Link className=\"h-5 w-5 text-muted-foreground\" />\n            <CardTitle className=\"text-base\">Reference Pages</CardTitle>\n          </div>\n          <CardDescription>\n            Add URLs to existing pages (product pages, competitor pages) and optionally describe what each page is. We'll extract key information from these references.\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          <div className=\"space-y-4\">\n            {data.referenceUrls.map((ref, index) => (\n              <div key={index} className=\"space-y-2\">\n                <div className=\"flex items-start gap-2\">\n                  <div className=\"flex-1 space-y-2\">\n                    <div className=\"space-y-1\">\n                      <Label htmlFor={`url-${index}`} className=\"text-sm text-muted-foreground\">\n                        Reference URL {index + 1} <span className=\"text-destructive\">*</span>\n                      </Label>\n                      <Input\n                        id={`url-${index}`}\n                        type=\"url\"\n                        placeholder=\"https://example.com/product-page\"\n                        value={ref.url}\n                        onChange={(e) => updateUrl(index, e.target.value)}\n                      />\n                    </div>\n                    <div className=\"space-y-1\">\n                      <Label htmlFor={`description-${index}`} className=\"text-sm text-muted-foreground\">\n                        Description <span className=\"text-xs font-normal\">(optional)</span>\n                      </Label>\n                      <Input\n                        id={`description-${index}`}\n                        type=\"text\"\n                        placeholder=\"e.g., competitor homepage, our product page, pricing comparison site\"\n                        value={ref.description || \"\"}\n                        onChange={(e) => updateDescription(index, e.target.value)}\n                        className=\"text-sm\"\n                      />\n                    </div>\n                  </div>\n                  {data.referenceUrls.length > 1 && (\n                    <Button\n                      variant=\"ghost\"\n                      size=\"icon\"\n                      className=\"mt-6 text-muted-foreground hover:text-destructive shrink-0\"\n                      onClick={() => removeUrlField(index)}\n                    >\n                      <X className=\"h-4 w-4\" />\n                      <span className=\"sr-only\">Remove URL</span>\n                    </Button>\n                  )}\n                </div>\n              </div>\n            ))}\n            <Button variant=\"outline\" size=\"sm\" className=\"gap-2 bg-transparent\" onClick={addUrlField}>\n              <Plus className=\"h-4 w-4\" />\n              Add another URL\n            </Button>\n            <p className=\"text-xs text-muted-foreground\">\n              We'll scrape these pages to extract USPs, pricing, tone of voice, and more.\n            </p>\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Navigation */}\n      <div className=\"flex justify-between pt-4\">\n        <Button variant=\"outline\" onClick={onBack}>\n          Back\n        </Button>\n        <Button \n          onClick={handleNext} \n          disabled={isLoading || isStartingScrape || !hasValidUrl} \n          size=\"lg\"\n        >\n          {isLoading || isStartingScrape ? (\n            <>\n              <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n              Starting...\n            </>\n          ) : (\n            // Show different button text based on whether this is a new scrape or just continuing\n            campaignData.scrapedUrls?.length ? \"Continue\" : \"Scrape & Continue\"\n          )}\n        </Button>\n      </div>\n\n      {/* Re-scrape Warning Dialog */}\n      <AlertDialog open={showRescrapeWarning} onOpenChange={(open) => !open && setShowRescrapeWarning(false)}>\n        <AlertDialogContent className=\"sm:max-w-[425px]\">\n          <AlertDialogHeader>\n            <div className=\"flex items-start gap-4\">\n              <div className=\"flex h-10 w-10 shrink-0 items-center justify-center rounded-full bg-amber-100 mt-1\">\n                <AlertTriangle className=\"h-5 w-5 text-amber-600\" />\n              </div>\n              <div className=\"flex-1 space-y-2\">\n                <AlertDialogTitle>Re-scrape Required</AlertDialogTitle>\n                <AlertDialogDescription>\n                  {pendingAction === 'step1_change' ? (\n                    <>\n                      Changing campaign settings will restart the scraping process since these \n                      settings affect how pages are analyzed. You may lose insights you've customized.\n                    </>\n                  ) : (\n                    <>\n                      You've modified or removed URLs that were already processed. This will restart \n                      the scraping process and you may lose insights you've customized in Step 4.\n                    </>\n                  )}\n                  <br /><br />\n                  Do you want to continue?\n                </AlertDialogDescription>\n              </div>\n            </div>\n          </AlertDialogHeader>\n          <AlertDialogFooter>\n            <AlertDialogCancel onClick={() => setShowRescrapeWarning(false)}>Cancel</AlertDialogCancel>\n            <AlertDialogAction \n              onClick={handleConfirmRescrape}\n              className=\"bg-[#4644B6] hover:bg-[#3a38a0]\"\n            >\n              Yes, Re-scrape\n            </AlertDialogAction>\n          </AlertDialogFooter>\n        </AlertDialogContent>\n      </AlertDialog>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2644, "column": 0}, "map": {"version":3,"sources":["file:///Users/wearebrain/Desktop/Manglar%20Media/adv_builder/xevio-adv-builder/components/ui/badge.tsx"],"sourcesContent":["import * as React from 'react'\nimport { Slot } from '@radix-ui/react-slot'\nimport { cva, type VariantProps } from 'class-variance-authority'\n\nimport { cn } from '@/lib/utils'\n\nconst badgeVariants = cva(\n  'inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden',\n  {\n    variants: {\n      variant: {\n        default:\n          'border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90',\n        secondary:\n          'border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90',\n        destructive:\n          'border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60',\n        outline:\n          'text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground',\n      },\n    },\n    defaultVariants: {\n      variant: 'default',\n    },\n  },\n)\n\nfunction Badge({\n  className,\n  variant,\n  asChild = false,\n  ...props\n}: React.ComponentProps<'span'> &\n  VariantProps<typeof badgeVariants> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : 'span'\n\n  return (\n    <Comp\n      data-slot=\"badge\"\n      className={cn(badgeVariants({ variant }), className)}\n      {...props}\n    />\n  )\n}\n\nexport { Badge, badgeVariants }\n"],"names":[],"mappings":";;;;;;;AACA;AACA;AAEA;;;;;AAEA,MAAM,gBAAgB,IAAA,0KAAG,EACvB,kZACA;IACE,UAAU;QACR,SAAS;YACP,SACE;YACF,WACE;YACF,aACE;YACF,SACE;QACJ;IACF;IACA,iBAAiB;QACf,SAAS;IACX;AACF;AAGF,SAAS,MAAM,EACb,SAAS,EACT,OAAO,EACP,UAAU,KAAK,EACf,GAAG,OAEuD;IAC1D,MAAM,OAAO,UAAU,2KAAI,GAAG;IAE9B,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,cAAc;YAAE;QAAQ,IAAI;QACzC,GAAG,KAAK;;;;;;AAGf;KAhBS"}},
    {"offset": {"line": 2696, "column": 0}, "map": {"version":3,"sources":["file:///Users/wearebrain/Desktop/Manglar%20Media/adv_builder/xevio-adv-builder/components/ui/spinner.tsx"],"sourcesContent":["import { cn } from \"@/lib/utils\"\n\nexport function Spinner({ className, ...props }: React.ComponentProps<\"svg\">) {\n  return (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width=\"24\"\n      height=\"24\"\n      viewBox=\"0 0 24 24\"\n      fill=\"none\"\n      stroke=\"currentColor\"\n      strokeWidth=\"2\"\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n      className={cn(\"animate-spin\", className)}\n      {...props}\n    >\n      <path d=\"M21 12a9 9 0 1 1-6.219-8.56\" />\n    </svg>\n  )\n}\n"],"names":[],"mappings":";;;;;AAAA;;;AAEO,SAAS,QAAQ,EAAE,SAAS,EAAE,GAAG,OAAoC;IAC1E,qBACE,6LAAC;QACC,OAAM;QACN,OAAM;QACN,QAAO;QACP,SAAQ;QACR,MAAK;QACL,QAAO;QACP,aAAY;QACZ,eAAc;QACd,gBAAe;QACf,WAAW,IAAA,qHAAE,EAAC,gBAAgB;QAC7B,GAAG,KAAK;kBAET,cAAA,6LAAC;YAAK,GAAE;;;;;;;;;;;AAGd;KAlBgB"}},
    {"offset": {"line": 2740, "column": 0}, "map": {"version":3,"sources":["file:///Users/wearebrain/Desktop/Manglar%20Media/adv_builder/xevio-adv-builder/components/scraping-dialog.tsx"],"sourcesContent":["\"use client\"\n\nimport {\n  AlertDialog,\n  AlertDialogContent,\n  AlertDialogHeader,\n  AlertDialogTitle,\n  AlertDialogDescription,\n  AlertDialogFooter,\n  AlertDialogCancel,\n} from \"@/components/ui/alert-dialog\"\nimport { Spinner } from \"@/components/ui/spinner\"\nimport { useEffect, useState } from \"react\"\n\ninterface ScrapingDialogProps {\n  open: boolean\n  onOpenChange: (open: boolean) => void\n  onCancel?: () => void\n  variant?: \"scraping\" | \"finalizing\"\n}\n\ninterface ScrapingDialogMessages {\n  title: string\n  description: string\n  messages: string[]\n}\n\n// Default messages for initial scraping (Step 2)\nconst defaultMessages: ScrapingDialogMessages = {\n  title: \"Analyzing Content\",\n  description: \"Your reference pages are being scraped and analyzed. This can take a couple of minutes.\",\n  messages: [\n    \"Initializing smart scraper...\",\n    \"Reading your reference pages...\",\n    \"Analyzing tone of voice and style...\",\n    \"Extracting key benefits and USPs...\",\n    \"Identifying pain points and solutions...\",\n    \"Structuring insights for your brief...\",\n    \"Finalizing analysis...\"\n  ]\n}\n\n// Messages for when user reaches Insights before scraping is done\nconst finalizingMessages: ScrapingDialogMessages = {\n  title: \"Finalizing Analysis\",\n  description: \"We're wrapping up the analysis of your reference pages. This should only take a moment.\",\n  messages: [\n    \"Almost there...\",\n    \"Processing final details...\",\n    \"Organizing your insights...\",\n    \"Just a few more seconds...\",\n    \"Preparing your data...\",\n    \"Nearly ready...\"\n  ]\n}\n\nexport function ScrapingDialog({ open, onOpenChange, onCancel, variant = \"scraping\" }: ScrapingDialogProps) {\n  const [messageIndex, setMessageIndex] = useState(0)\n  \n  const content = variant === \"finalizing\" ? finalizingMessages : defaultMessages\n\n  // Cycle through messages to keep the user engaged\n  useEffect(() => {\n    if (!open) {\n      setMessageIndex(0)\n      return\n    }\n\n    const interval = setInterval(() => {\n      setMessageIndex((prev) => {\n        // If we reach the last message, stay there\n        if (prev >= content.messages.length - 1) return prev\n        return prev + 1\n      })\n    }, variant === \"finalizing\" ? 3000 : 4500) // Faster cycling for finalizing variant\n\n    return () => clearInterval(interval)\n  }, [open, content.messages.length, variant])\n\n  return (\n    <AlertDialog open={open} onOpenChange={onOpenChange}>\n      <AlertDialogContent className=\"sm:max-w-[425px]\">\n        <AlertDialogHeader>\n          <div className=\"flex flex-col items-center justify-center gap-6 py-6\">\n            {/* Shadcn Spinner */}\n            <Spinner className=\"h-12 w-12 text-[#0dadb7]\" />\n\n            <div className=\"space-y-2 text-center\">\n              <AlertDialogTitle className=\"text-xl\">{content.title}</AlertDialogTitle>\n              <AlertDialogDescription className=\"mx-auto max-w-[280px]\">\n                {content.description}\n              </AlertDialogDescription>\n            </div>\n            \n            {/* Dynamic Status Message */}\n            <div className=\"min-h-[24px] flex items-center justify-center\">\n              <p className=\"text-sm font-medium text-[#0dadb7] animate-pulse text-center transition-all duration-500\">\n                {content.messages[messageIndex]}\n              </p>\n            </div>\n          </div>\n        </AlertDialogHeader>\n        \n        {onCancel && (\n          <AlertDialogFooter className=\"sm:justify-center\">\n            <AlertDialogCancel onClick={onCancel} className=\"mt-2 text-muted-foreground hover:text-foreground\">\n              Cancel\n            </AlertDialogCancel>\n          </AlertDialogFooter>\n        )}\n      </AlertDialogContent>\n    </AlertDialog>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AASA;AACA;;;AAZA;;;;AA2BA,iDAAiD;AACjD,MAAM,kBAA0C;IAC9C,OAAO;IACP,aAAa;IACb,UAAU;QACR;QACA;QACA;QACA;QACA;QACA;QACA;KACD;AACH;AAEA,kEAAkE;AAClE,MAAM,qBAA6C;IACjD,OAAO;IACP,aAAa;IACb,UAAU;QACR;QACA;QACA;QACA;QACA;QACA;KACD;AACH;AAEO,SAAS,eAAe,EAAE,IAAI,EAAE,YAAY,EAAE,QAAQ,EAAE,UAAU,UAAU,EAAuB;;IACxG,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,yKAAQ,EAAC;IAEjD,MAAM,UAAU,YAAY,eAAe,qBAAqB;IAEhE,kDAAkD;IAClD,IAAA,0KAAS;oCAAC;YACR,IAAI,CAAC,MAAM;gBACT,gBAAgB;gBAChB;YACF;YAEA,MAAM,WAAW;qDAAY;oBAC3B;6DAAgB,CAAC;4BACf,2CAA2C;4BAC3C,IAAI,QAAQ,QAAQ,QAAQ,CAAC,MAAM,GAAG,GAAG,OAAO;4BAChD,OAAO,OAAO;wBAChB;;gBACF;oDAAG,YAAY,eAAe,OAAO,MAAM,wCAAwC;;YAEnF;4CAAO,IAAM,cAAc;;QAC7B;mCAAG;QAAC;QAAM,QAAQ,QAAQ,CAAC,MAAM;QAAE;KAAQ;IAE3C,qBACE,6LAAC,sJAAW;QAAC,MAAM;QAAM,cAAc;kBACrC,cAAA,6LAAC,6JAAkB;YAAC,WAAU;;8BAC5B,6LAAC,4JAAiB;8BAChB,cAAA,6LAAC;wBAAI,WAAU;;0CAEb,6LAAC,0IAAO;gCAAC,WAAU;;;;;;0CAEnB,6LAAC;gCAAI,WAAU;;kDACb,6LAAC,2JAAgB;wCAAC,WAAU;kDAAW,QAAQ,KAAK;;;;;;kDACpD,6LAAC,iKAAsB;wCAAC,WAAU;kDAC/B,QAAQ,WAAW;;;;;;;;;;;;0CAKxB,6LAAC;gCAAI,WAAU;0CACb,cAAA,6LAAC;oCAAE,WAAU;8CACV,QAAQ,QAAQ,CAAC,aAAa;;;;;;;;;;;;;;;;;;;;;;gBAMtC,0BACC,6LAAC,4JAAiB;oBAAC,WAAU;8BAC3B,cAAA,6LAAC,4JAAiB;wBAAC,SAAS;wBAAU,WAAU;kCAAmD;;;;;;;;;;;;;;;;;;;;;;AAQ/G;GAzDgB;KAAA"}},
    {"offset": {"line": 2920, "column": 0}, "map": {"version":3,"sources":["file:///Users/wearebrain/Desktop/Manglar%20Media/adv_builder/xevio-adv-builder/lib/supabase.ts"],"sourcesContent":["import { createClient } from '@supabase/supabase-js'\n\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL!\nconst supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!\n\nexport const supabase = createClient(supabaseUrl, supabaseAnonKey)\n\n"],"names":[],"mappings":";;;;AAEoB;AAFpB;;AAEA,MAAM;AACN,MAAM;AAEC,MAAM,WAAW,IAAA,iMAAY,EAAC,aAAa"}},
    {"offset": {"line": 2937, "column": 0}, "map": {"version":3,"sources":["file:///Users/wearebrain/Desktop/Manglar%20Media/adv_builder/xevio-adv-builder/components/step-three.tsx"],"sourcesContent":["\"use client\"\n\nimport type React from \"react\"\nimport { useState, useEffect, useRef } from \"react\"\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Textarea } from \"@/components/ui/textarea\"\nimport { Badge } from \"@/components/ui/badge\"\nimport {\n  Sparkles,\n  DollarSign,\n  Target,\n  MessageSquare,\n  Zap,\n  CheckCircle2,\n  Plus,\n  Pencil,\n  Trash2,\n  Check,\n  X,\n  ChevronDown,\n  ChevronUp,\n  Loader2,\n} from \"lucide-react\"\nimport { CampaignData, StepThreeState, EditableItem, CategoryKey } from \"@/lib/types\"\nimport { ScrapingDialog } from \"@/components/scraping-dialog\"\nimport { supabase } from \"@/lib/supabase\"\nimport { RealtimeChannel } from \"@supabase/supabase-js\"\n\ninterface StepThreeProps {\n  onBack: () => void\n  onNext: () => void\n  campaignData: CampaignData\n  updateCampaignData: (data: CampaignData) => void\n  data: StepThreeState\n  updateData: (data: StepThreeState) => void\n}\n\n// Fallback initial data (can be empty or keep the demo data as fallback)\nconst defaultScrapedData: Record<CategoryKey, EditableItem[]> = {\n  usps: [],\n  pricing: [],\n  mainAngle: [],\n  toneOfVoice: [],\n  keyHooks: [],\n}\n\ninterface CategoryConfig {\n  key: CategoryKey\n  title: string\n  description: string\n  icon: React.ReactNode\n  multiline: boolean\n}\n\nconst categories: CategoryConfig[] = [\n  {\n    key: \"usps\",\n    title: \"USPs\",\n    description: \"Key selling points\",\n    icon: <Sparkles className=\"h-4 w-4\" />,\n    multiline: false,\n  },\n  {\n    key: \"pricing\",\n    title: \"Pricing\",\n    description: \"Pricing information\",\n    icon: <DollarSign className=\"h-4 w-4\" />,\n    multiline: false,\n  },\n  {\n    key: \"mainAngle\",\n    title: \"Main Angle\",\n    description: \"Primary messaging angle\",\n    icon: <Target className=\"h-4 w-4\" />,\n    multiline: true,\n  },\n  {\n    key: \"toneOfVoice\",\n    title: \"Tone of Voice\",\n    description: \"Writing style\",\n    icon: <MessageSquare className=\"h-4 w-4\" />,\n    multiline: true,\n  },\n  {\n    key: \"keyHooks\",\n    title: \"Key Hooks\",\n    description: \"Attention-grabbing headlines\",\n    icon: <Zap className=\"h-4 w-4\" />,\n    multiline: false,\n  },\n]\n\nexport function StepThree({ onBack, onNext, campaignData, updateCampaignData, data: stepData, updateData }: StepThreeProps) {\n  // Use local state that syncs with parent\n  const [localData, setLocalData] = useState<Record<CategoryKey, EditableItem[]>>(stepData.data)\n  const [isWaitingForScraping, setIsWaitingForScraping] = useState(false)\n  const channelRef = useRef<RealtimeChannel | null>(null)\n  \n  // Check if scraping is still in progress\n  const scrapingInProgress = campaignData.status === \"scraping\" && !campaignData.scrapingResult\n\n  // Subscribe to scraping updates if still in progress\n  useEffect(() => {\n    if (scrapingInProgress && campaignData.id && !channelRef.current) {\n      setIsWaitingForScraping(true)\n      \n      const channel = supabase\n        .channel(`campaign-insights-${campaignData.id}`)\n        .on(\n          \"postgres_changes\",\n          {\n            event: \"UPDATE\",\n            schema: \"public\",\n            table: \"campaigns\",\n            filter: `id=eq.${campaignData.id}`,\n          },\n          (payload) => {\n            const newStatus = payload.new.status\n            const scrapingResult = payload.new.scraping_result\n            \n            if (newStatus === \"urls_processed\" && scrapingResult) {\n              updateCampaignData({\n                ...campaignData,\n                status: \"urls_processed\",\n                scrapingResult: scrapingResult\n              })\n              setIsWaitingForScraping(false)\n            } else if (newStatus === \"failed\") {\n              setIsWaitingForScraping(false)\n              alert(\"Scraping failed. Please go back and try again.\")\n            }\n          }\n        )\n        .subscribe(async (status) => {\n          if (status === 'SUBSCRIBED') {\n            // Check current status in case it updated while we were connecting\n            const { data: currentCampaign } = await supabase\n              .from('campaigns')\n              .select('status, scraping_result')\n              .eq('id', campaignData.id)\n              .single()\n            \n            if (currentCampaign?.status === \"urls_processed\" && currentCampaign.scraping_result) {\n              updateCampaignData({\n                ...campaignData,\n                status: \"urls_processed\",\n                scrapingResult: currentCampaign.scraping_result\n              })\n              setIsWaitingForScraping(false)\n            } else if (currentCampaign?.status === \"failed\") {\n              setIsWaitingForScraping(false)\n              alert(\"Scraping failed. Please go back and try again.\")\n            }\n          }\n        })\n      \n      channelRef.current = channel\n    }\n    \n    // Cleanup subscription on unmount\n    return () => {\n      if (channelRef.current) {\n        supabase.removeChannel(channelRef.current)\n        channelRef.current = null\n      }\n    }\n  }, [scrapingInProgress, campaignData, updateCampaignData])\n\n  // When scraping completes, close the waiting state\n  useEffect(() => {\n    if (!scrapingInProgress && isWaitingForScraping) {\n      setIsWaitingForScraping(false)\n    }\n  }, [scrapingInProgress, isWaitingForScraping])\n  \n  // Initialize from scrapingResult only if not already initialized\n  useEffect(() => {\n    if (!stepData.initialized && campaignData?.scrapingResult) {\n      const result = campaignData.scrapingResult\n      const newData: Record<CategoryKey, EditableItem[]> = { ...defaultScrapedData }\n\n      // Iterate through our known categories and populate from the scraping result\n      categories.forEach(cat => {\n        if (Array.isArray(result[cat.key])) {\n          newData[cat.key] = result[cat.key].map((text: string, index: number) => ({\n            id: `${cat.key}-${index}`,\n            text: text,\n            selected: true, // All insights selected by default - users deselect unwanted items\n            isCustom: false\n          }))\n        }\n      })\n      // Use setData to update both local and parent state\n      setData(newData)\n    } else if (stepData.initialized) {\n      // Sync local state with parent state if it changes externally\n      if (localData !== stepData.data) {\n        setLocalData(stepData.data)\n      }\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [campaignData, stepData.initialized])\n\n  // Helper to update both local and parent state\n  const setData = (newData: Record<CategoryKey, EditableItem[]> | ((prev: Record<CategoryKey, EditableItem[]>) => Record<CategoryKey, EditableItem[]>)) => {\n    const updated = typeof newData === 'function' ? newData(localData) : newData\n    setLocalData(updated)\n    updateData({ data: updated, initialized: true })\n  }\n\n  // Use localData for rendering\n  const data = localData\n\n  const [editingId, setEditingId] = useState<string | null>(null)\n  const [editText, setEditText] = useState(\"\")\n  const [addingTo, setAddingTo] = useState<CategoryKey | null>(null)\n  const [newItemText, setNewItemText] = useState(\"\")\n  const [expandedCategories, setExpandedCategories] = useState<CategoryKey[]>([\n    \"usps\",\n    \"pricing\",\n    \"mainAngle\",\n    \"toneOfVoice\",\n    \"keyHooks\"\n  ])\n\n  const [isSaving, setIsSaving] = useState(false)\n\n  const handleNext = async () => {\n    setIsSaving(true)\n    try {\n      if (campaignData.id) {\n        await fetch(\"/api/save-progress\", {\n          method: \"POST\",\n          headers: { \"Content-Type\": \"application/json\" },\n          body: JSON.stringify({\n            campaignId: campaignData.id,\n            selectedInsights: data,\n          }),\n        })\n      }\n      onNext()\n    } catch (error) {\n      console.error(\"Failed to save progress:\", error)\n      // Proceed anyway to not block the user\n      onNext()\n    } finally {\n      setIsSaving(false)\n    }\n  }\n\n  const toggleCategory = (key: CategoryKey) => {\n    setExpandedCategories((prev) => (prev.includes(key) ? prev.filter((k) => k !== key) : [...prev, key]))\n  }\n\n  const toggleItemSelection = (category: CategoryKey, itemId: string) => {\n    setData((prev) => ({\n      ...prev,\n      [category]: prev[category].map((item) => (item.id === itemId ? { ...item, selected: !item.selected } : item)),\n    }))\n  }\n\n  const startEditing = (item: EditableItem) => {\n    setEditingId(item.id)\n    setEditText(item.text)\n  }\n\n  const saveEdit = (category: CategoryKey) => {\n    if (!editingId || !editText.trim()) return\n    setData((prev) => ({\n      ...prev,\n      [category]: prev[category].map((item) => (item.id === editingId ? { ...item, text: editText.trim() } : item)),\n    }))\n    setEditingId(null)\n    setEditText(\"\")\n  }\n\n  const cancelEdit = () => {\n    setEditingId(null)\n    setEditText(\"\")\n  }\n\n  const deleteItem = (category: CategoryKey, itemId: string) => {\n    setData((prev) => ({\n      ...prev,\n      [category]: prev[category].filter((item) => item.id !== itemId),\n    }))\n  }\n\n  const startAdding = (category: CategoryKey) => {\n    setAddingTo(category)\n    setNewItemText(\"\")\n  }\n\n  const saveNewItem = (category: CategoryKey) => {\n    if (!newItemText.trim()) return\n    const newItem: EditableItem = {\n      id: `${category}-custom-${Date.now()}`,\n      text: newItemText.trim(),\n      selected: true,\n      isCustom: true,\n    }\n    setData((prev) => ({\n      ...prev,\n      [category]: [...prev[category], newItem],\n    }))\n    setAddingTo(null)\n    setNewItemText(\"\")\n  }\n\n  const cancelAdding = () => {\n    setAddingTo(null)\n    setNewItemText(\"\")\n  }\n\n  const getTotalSelected = () => {\n    return Object.values(data)\n      .flat()\n      .filter((item) => item.selected).length\n  }\n\n  const getCategoryCount = (category: CategoryKey) => {\n    const items = data[category]\n    const selected = items.filter((item) => item.selected).length\n    return { selected, total: items.length }\n  }\n\n  return (\n    <div className=\"space-y-4\">\n      {/* Success Banner */}\n      <div className=\"flex items-center gap-3 rounded-lg border border-success/30 bg-success/10 p-4\">\n        <CheckCircle2 className=\"h-5 w-5 text-success shrink-0\" />\n        <div>\n          <p className=\"font-medium text-foreground\">Reference pages scraped successfully</p>\n          <p className=\"text-sm text-muted-foreground\">Select, edit, or add your own insights for the brief</p>\n        </div>\n      </div>\n\n      {/* Categories */}\n      {categories.map((category) => {\n        const { selected, total } = getCategoryCount(category.key)\n        const isExpanded = expandedCategories.includes(category.key)\n        const items = data[category.key]\n\n        return (\n          <Card key={category.key} className=\"overflow-hidden\">\n            {/* Category Header - Clickable to expand/collapse */}\n            <CardHeader\n              className=\"pb-3 cursor-pointer hover:bg-muted/30 transition-colors\"\n              onClick={() => toggleCategory(category.key)}\n            >\n              <div className=\"flex items-center justify-between\">\n                <div className=\"flex items-center gap-3\">\n                  <div className=\"flex h-8 w-8 items-center justify-center rounded-md bg-[#0dadb7]/10 text-[#0dadb7]\">\n                    {category.icon}\n                  </div>\n                  <div>\n                    <CardTitle className=\"text-base\">{category.title}</CardTitle>\n                    <p className=\"text-xs text-muted-foreground\">{category.description}</p>\n                  </div>\n                </div>\n                <div className=\"flex items-center gap-3\">\n                  <Badge variant=\"secondary\" className=\"bg-brand-gray\">\n                    {selected}/{total} selected\n                  </Badge>\n                  {isExpanded ? (\n                    <ChevronUp className=\"h-4 w-4 text-muted-foreground\" />\n                  ) : (\n                    <ChevronDown className=\"h-4 w-4 text-muted-foreground\" />\n                  )}\n                </div>\n              </div>\n            </CardHeader>\n\n            {/* Category Content */}\n            {isExpanded && (\n              <CardContent className=\"pt-0 space-y-2\">\n                {items.map((item) => (\n                  <div\n                    key={item.id}\n                    className={`group relative rounded-lg border p-3 transition-all ${\n                      item.selected\n                        ? \"border-[#0dadb7]/40 bg-[#0dadb7]/5\"\n                        : \"border-border bg-background hover:border-border/80\"\n                    }`}\n                  >\n                    {editingId === item.id ? (\n                      // Edit Mode\n                      <div className=\"space-y-2\">\n                        {category.multiline ? (\n                          <Textarea\n                            value={editText}\n                            onChange={(e) => setEditText(e.target.value)}\n                            className=\"min-h-[80px] text-sm\"\n                            autoFocus\n                          />\n                        ) : (\n                          <Input\n                            value={editText}\n                            onChange={(e) => setEditText(e.target.value)}\n                            className=\"text-sm\"\n                            autoFocus\n                          />\n                        )}\n                        <div className=\"flex gap-2 justify-end\">\n                          <Button size=\"sm\" variant=\"ghost\" onClick={cancelEdit}>\n                            <X className=\"h-3 w-3 mr-1\" />\n                            Cancel\n                          </Button>\n                          <Button size=\"sm\" onClick={() => saveEdit(category.key)}>\n                            <Check className=\"h-3 w-3 mr-1\" />\n                            Save\n                          </Button>\n                        </div>\n                      </div>\n                    ) : (\n                      // Display Mode\n                      <div className=\"flex items-start gap-3\">\n                        {/* Selection Toggle */}\n                        <button\n                          onClick={() => toggleItemSelection(category.key, item.id)}\n                          className={`mt-0.5 shrink-0 h-5 w-5 rounded border-2 flex items-center justify-center transition-colors ${\n                            item.selected\n                              ? \"bg-[#0dadb7] border-[#0dadb7] text-white\"\n                              : \"border-muted-foreground/30 hover:border-[#0dadb7]\"\n                          }`}\n                        >\n                          {item.selected && <Check className=\"h-3 w-3\" />}\n                        </button>\n\n                        {/* Text Content */}\n                        <p\n                          className={`flex-1 text-sm leading-relaxed ${\n                            item.selected ? \"text-foreground\" : \"text-muted-foreground\"\n                          }`}\n                        >\n                          {item.text}\n                          {item.isCustom && (\n                            <Badge variant=\"outline\" className=\"ml-2 text-xs py-0 px-1.5\">\n                              Custom\n                            </Badge>\n                          )}\n                        </p>\n\n                        {/* Action Buttons */}\n                        <div className=\"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity shrink-0\">\n                          <Button size=\"icon\" variant=\"ghost\" className=\"h-7 w-7\" onClick={() => startEditing(item)}>\n                            <Pencil className=\"h-3 w-3\" />\n                          </Button>\n                          <Button\n                            size=\"icon\"\n                            variant=\"ghost\"\n                            className=\"h-7 w-7 text-destructive hover:text-destructive\"\n                            onClick={() => deleteItem(category.key, item.id)}\n                          >\n                            <Trash2 className=\"h-3 w-3\" />\n                          </Button>\n                        </div>\n                      </div>\n                    )}\n                  </div>\n                ))}\n\n                {/* Add New Item */}\n                {addingTo === category.key ? (\n                  <div className=\"rounded-lg border border-dashed border-[#0dadb7] p-3 space-y-2 bg-[#0dadb7]/5\">\n                    {category.multiline ? (\n                      <Textarea\n                        value={newItemText}\n                        onChange={(e) => setNewItemText(e.target.value)}\n                        placeholder={`Add your own ${category.title.toLowerCase()}...`}\n                        className=\"min-h-[80px] text-sm\"\n                        autoFocus\n                      />\n                    ) : (\n                      <Input\n                        value={newItemText}\n                        onChange={(e) => setNewItemText(e.target.value)}\n                        placeholder={`Add your own ${category.title.toLowerCase()}...`}\n                        className=\"text-sm\"\n                        autoFocus\n                      />\n                    )}\n                    <div className=\"flex gap-2 justify-end\">\n                      <Button size=\"sm\" variant=\"ghost\" onClick={cancelAdding}>\n                        Cancel\n                      </Button>\n                      <Button size=\"sm\" onClick={() => saveNewItem(category.key)}>\n                        <Plus className=\"h-3 w-3 mr-1\" />\n                        Add\n                      </Button>\n                    </div>\n                  </div>\n                ) : (\n                  <button\n                    onClick={() => startAdding(category.key)}\n                    className=\"w-full rounded-lg border border-dashed border-muted-foreground/30 p-3 text-sm text-muted-foreground hover:border-[#0dadb7] hover:text-[#0dadb7] hover:bg-[#0dadb7]/5 transition-colors flex items-center justify-center gap-2\"\n                  >\n                    <Plus className=\"h-4 w-4\" />\n                    Add your own\n                  </button>\n                )}\n              </CardContent>\n            )}\n          </Card>\n        )\n      })}\n\n      {/* Summary & Navigation */}\n      <Card className=\"border-foreground/20 bg-muted/30\">\n        <CardContent className=\"py-4\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <p className=\"font-medium text-foreground\">{getTotalSelected()} items selected for your brief</p>\n              <p className=\"text-sm text-muted-foreground\">These insights will be used to generate your advertorial</p>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n\n      <div className=\"flex justify-between pt-4\">\n        <Button variant=\"outline\" onClick={onBack}>\n          Back\n        </Button>\n        <Button size=\"lg\" onClick={handleNext} disabled={isSaving}>\n          {isSaving ? (\n            <>\n              <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n              Saving...\n            </>\n          ) : (\n            \"Continue to Review\"\n          )}\n        </Button>\n      </div>\n      \n      {/* Show dialog if waiting for scraping to complete */}\n      <ScrapingDialog \n        open={isWaitingForScraping} \n        onOpenChange={() => {}} \n        variant=\"finalizing\"\n      />\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3820, "column": 0}, "map": {"version":3,"sources":["file:///Users/wearebrain/Desktop/Manglar%20Media/adv_builder/xevio-adv-builder/components/step-four.tsx"],"sourcesContent":["\"use client\"\n\nimport type React from \"react\"\nimport { useState } from \"react\"\nimport { Card, CardContent } from \"@/components/ui/card\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Badge } from \"@/components/ui/badge\"\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\"\nimport {\n  Plus,\n  X,\n  GripVertical,\n  FileText,\n  Quote,\n  List,\n  Lightbulb,\n  ShieldCheck,\n  Star,\n  Percent,\n  HelpCircle,\n  ImageIcon,\n  MessageSquare,\n  Target,\n  Clock,\n  DollarSign,\n  Layers,\n  Globe,\n  Loader2,\n  BookOpen,\n} from \"lucide-react\"\nimport {\n  DndContext,\n  DragOverlay,\n  useDraggable,\n  useDroppable,\n  PointerSensor,\n  useSensor,\n  useSensors,\n  type DragStartEvent,\n  type DragEndEvent,\n  type DragOverEvent,\n} from \"@dnd-kit/core\"\nimport { SortableContext, useSortable, verticalListSortingStrategy, arrayMove } from \"@dnd-kit/sortable\"\nimport { CSS } from \"@dnd-kit/utilities\"\nimport { CampaignData, StepFourState, StepOneState, AddedBlock as AddedBlockType } from \"@/lib/types\"\n\ntype BlockType = {\n  id: string\n  name: string\n  icon: React.ReactNode\n  category: string\n  hasInput?: boolean\n  inputLabel?: string\n  inputType?: 'text' | 'number'\n  hasSelect?: boolean\n  selectOptions?: string[]\n  selectLabel?: string\n  required?: boolean\n}\n\nconst buildingBlocks: BlockType[] = [\n  // Opening\n  {\n    id: \"lede-journalistic\",\n    name: \"Lede (Journalistic)\",\n    icon: <FileText className=\"h-4 w-4\" />,\n    category: \"Opening\",\n    required: true,\n  },\n  {\n    id: \"lede-story\",\n    name: \"Lede (Story, First Person)\",\n    icon: <FileText className=\"h-4 w-4\" />,\n    category: \"Opening\",\n    required: true,\n  },\n  {\n    id: \"lede-product\",\n    name: \"Lede (Product-Focused)\",\n    icon: <FileText className=\"h-4 w-4\" />,\n    category: \"Opening\",\n    required: true,\n  },\n  { id: \"teaser\", name: \"Teaser\", icon: <Lightbulb className=\"h-4 w-4\" />, category: \"Opening\" },\n  { id: \"subheadline\", name: \"Subheadline\", icon: <FileText className=\"h-4 w-4\" />, category: \"Opening\" },\n  {\n    id: \"authority\",\n    name: \"Authority\",\n    icon: <ShieldCheck className=\"h-4 w-4\" />,\n    category: \"Opening\",\n    hasInput: true,\n    inputLabel: \"Authority Name / Role\",\n  },\n  // Authority & Credibility\n  {\n    id: \"expert-testimonial\",\n    name: \"Expert Testimonial (Quote)\",\n    icon: <Quote className=\"h-4 w-4\" />,\n    category: \"Authority & Credibility\",\n    hasSelect: true,\n    selectLabel: \"Quote From\",\n    selectOptions: [\"User\", \"Founder\", \"Expert\"],\n  },\n  {\n    id: \"trust-elements\",\n    name: \"Trust Elements\",\n    icon: <ShieldCheck className=\"h-4 w-4\" />,\n    category: \"Authority & Credibility\",\n  },\n  {\n    id: \"social-proof\",\n    name: \"Social Proof (Reviews)\",\n    icon: <Star className=\"h-4 w-4\" />,\n    category: \"Authority & Credibility\",\n  },\n  {\n    id: \"studies-research\",\n    name: \"Studies/Research\",\n    icon: <BookOpen className=\"h-4 w-4\" />,\n    category: \"Authority & Credibility\",\n    hasInput: true,\n    inputLabel: \"Study URL / Description / Topic\",\n  },\n  // Problem & Solution\n  {\n    id: \"x-reasons\",\n    name: \"(X) Reasons For\",\n    icon: <List className=\"h-4 w-4\" />,\n    category: \"Problem & Solution\",\n    hasInput: true,\n    inputLabel: \"Number of Reasons (X)\",\n    inputType: \"number\",\n  },\n  {\n    id: \"problem-awareness\",\n    name: \"Problem Awareness Paragraph\",\n    icon: <Target className=\"h-4 w-4\" />,\n    category: \"Problem & Solution\",\n  },\n  {\n    id: \"listicle-intro\",\n    name: \"Listicle Intro\",\n    icon: <List className=\"h-4 w-4\" />,\n    category: \"Problem & Solution\",\n  },\n  {\n    id: \"listicle-comparison\",\n    name: \"Listicle (Product Comparison)\",\n    icon: <List className=\"h-4 w-4\" />,\n    category: \"Problem & Solution\",\n    hasInput: true,\n    inputLabel: \"Number of Competitors\",\n    inputType: \"number\",\n  },\n  {\n    id: \"solution\",\n    name: \"Solution (Product Introduction)\",\n    icon: <Lightbulb className=\"h-4 w-4\" />,\n    category: \"Problem & Solution\",\n  },\n  {\n    id: \"unique-mechanism\",\n    name: \"Unique Mechanism\",\n    icon: <Layers className=\"h-4 w-4\" />,\n    category: \"Problem & Solution\",\n  },\n  { id: \"killing-concerns\", name: \"Killing Concerns\", icon: <X className=\"h-4 w-4\" />, category: \"Problem & Solution\" },\n  // Benefits & Features\n  {\n    id: \"bullet-benefits\",\n    name: \"Bullet Points (Benefits)\",\n    icon: <List className=\"h-4 w-4\" />,\n    category: \"Benefits & Features\",\n  },\n  {\n    id: \"bullet-problems\",\n    name: \"Bullet Points (Current Problems)\",\n    icon: <List className=\"h-4 w-4\" />,\n    category: \"Benefits & Features\",\n  },\n  {\n    id: \"future-me\",\n    name: \"Future Me (Psychological Benefits)\",\n    icon: <Star className=\"h-4 w-4\" />,\n    category: \"Benefits & Features\",\n  },\n  // Urgency & CTA\n  { id: \"call-to-urgency\", name: \"Call to Urgency\", icon: <Clock className=\"h-4 w-4\" />, category: \"Urgency & CTA\" },\n  { id: \"scarcity\", name: \"Scarcity\", icon: <Clock className=\"h-4 w-4\" />, category: \"Urgency & CTA\" },\n  {\n    id: \"discount\",\n    name: \"Discount\",\n    icon: <Percent className=\"h-4 w-4\" />,\n    category: \"Urgency & CTA\",\n    hasInput: true,\n    inputLabel: \"Discount Value\",\n  },\n  {\n    id: \"price-explainer\",\n    name: \"Price Explainer\",\n    icon: <DollarSign className=\"h-4 w-4\" />,\n    category: \"Urgency & CTA\",\n  },\n  { id: \"next-steps\", name: \"Next Steps Explainer\", icon: <FileText className=\"h-4 w-4\" />, category: \"Urgency & CTA\" },\n  { id: \"cta\", name: \"CTA\", icon: <MessageSquare className=\"h-4 w-4\" />, category: \"Urgency & CTA\" },\n  // Other\n  { id: \"faq\", name: \"FAQ\", icon: <HelpCircle className=\"h-4 w-4\" />, category: \"Other\" },\n  {\n    id: \"placeholder-image\",\n    name: \"Placeholder for Image / GIF / Chart\",\n    icon: <ImageIcon className=\"h-4 w-4\" />,\n    category: \"Other\",\n    hasInput: true,\n    inputLabel: \"Notes\",\n  },\n]\n\ntype AddedBlock = {\n  uid: string\n  block: BlockType\n  inputValue?: string\n  selectValue?: string\n}\n\nconst categories = [\n  \"Opening\",\n  \"Problem & Solution\",\n  \"Benefits & Features\",\n  \"Authority & Credibility\",\n  \"Urgency & CTA\",\n  \"Other\",\n]\n\nfunction DraggablePaletteBlock({ block, onAdd }: { block: BlockType; onAdd: () => void }) {\n  const { attributes, listeners, setNodeRef, isDragging } = useDraggable({\n    id: `palette-${block.id}`,\n    data: { type: \"palette\", block },\n  })\n\n  return (\n    <Button\n      ref={setNodeRef}\n      {...listeners}\n      {...attributes}\n      variant=\"outline\"\n      size=\"sm\"\n      className={`h-auto py-1.5 px-2 text-xs bg-white border-[#0dadb7]/30 hover:bg-[#0dadb7]/10 hover:border-[#0dadb7] cursor-grab active:cursor-grabbing ${\n        isDragging ? \"opacity-50\" : \"\"\n      }`}\n      onClick={onAdd}\n    >\n      <Plus className=\"mr-1 h-3 w-3 text-[#0dadb7]\" />\n      {block.name}\n      {block.required && <span className=\"ml-1 text-destructive\">*</span>}\n    </Button>\n  )\n}\n\nfunction SortableStructureBlock({\n  item,\n  index,\n  onRemove,\n  onUpdateInput,\n  onUpdateSelect,\n}: {\n  item: AddedBlock\n  index: number\n  onRemove: () => void\n  onUpdateInput: (value: string) => void\n  onUpdateSelect: (value: string) => void\n}) {\n  const { attributes, listeners, setNodeRef, transform, transition, isDragging } = useSortable({\n    id: item.uid,\n  })\n\n  const style = {\n    transform: CSS.Transform.toString(transform),\n    transition,\n  }\n\n  const hasExtraContent = item.block.hasInput || item.block.hasSelect\n\n  return (\n    <Card\n      ref={setNodeRef}\n      style={style}\n      className={`border-border transition-all ${isDragging ? \"opacity-50 z-50 shadow-lg\" : \"\"}`}\n    >\n      <CardContent className={`p-3 ${!hasExtraContent ? \"min-h-[56px]\" : \"\"}`}>\n        <div className={`flex items-start gap-3 ${!hasExtraContent ? \"items-center h-full\" : \"\"}`}>\n          <div className=\"flex items-center gap-1 shrink-0\">\n            <div\n              {...attributes}\n              {...listeners}\n              className=\"cursor-grab active:cursor-grabbing p-1 hover:bg-muted rounded\"\n            >\n              <GripVertical className=\"h-4 w-4 text-muted-foreground\" />\n            </div>\n            <div className=\"flex h-6 w-6 items-center justify-center rounded bg-[#0dadb7] text-xs font-medium text-white\">\n              {index + 1}\n            </div>\n          </div>\n\n          <div className=\"flex-1 min-w-0\">\n            <div className=\"flex items-center gap-2\">\n              {item.block.icon}\n              <span className=\"text-sm font-medium truncate\">{item.block.name}</span>\n            </div>\n\n            {item.block.hasInput && (\n              <div className=\"mt-2\">\n                <Input\n                  type={item.block.inputType || \"text\"}\n                  placeholder={item.block.inputLabel}\n                  value={item.inputValue || \"\"}\n                  onChange={(e) => onUpdateInput(e.target.value)}\n                  className=\"h-8 text-xs\"\n                />\n              </div>\n            )}\n\n            {item.block.hasSelect && (\n              <div className=\"mt-2\">\n                <Select value={item.selectValue || item.block.selectOptions?.[0]} onValueChange={onUpdateSelect}>\n                  <SelectTrigger className=\"h-8 text-xs\">\n                    <SelectValue placeholder={item.block.selectLabel} />\n                  </SelectTrigger>\n                  <SelectContent>\n                    {item.block.selectOptions?.map((option) => (\n                      <SelectItem key={option} value={option} className=\"text-xs\">\n                        {option}\n                      </SelectItem>\n                    ))}\n                  </SelectContent>\n                </Select>\n              </div>\n            )}\n          </div>\n\n          <Button\n            variant=\"ghost\"\n            size=\"icon\"\n            className=\"h-7 w-7 text-muted-foreground hover:text-destructive shrink-0\"\n            onClick={onRemove}\n          >\n            <X className=\"h-4 w-4\" />\n          </Button>\n        </div>\n      </CardContent>\n    </Card>\n  )\n}\n\nfunction DropZone({ id, isOver }: { id: string; isOver: boolean }) {\n  const { setNodeRef } = useDroppable({ id })\n\n  return (\n    <div\n      ref={setNodeRef}\n      className={`transition-all duration-200 rounded-md my-2 ${\n        isOver ? \"h-12 bg-[#0dadb7]/20 border-2 border-dashed border-[#0dadb7] flex items-center justify-center\" : \"h-2\"\n      }`}\n    >\n      {isOver && <span className=\"text-xs font-medium text-[#0dadb7]\">Drop here</span>}\n    </div>\n  )\n}\n\nfunction DroppableStructureArea({\n  children,\n  isEmpty,\n  isOver,\n}: {\n  children: React.ReactNode\n  isEmpty: boolean\n  isOver: boolean\n}) {\n  const { setNodeRef } = useDroppable({\n    id: \"structure-drop-area\",\n  })\n\n  return (\n    <div\n      ref={setNodeRef}\n      className={`min-h-[200px] max-h-[600px] overflow-y-auto pr-2 rounded-lg transition-colors ${\n        isEmpty && isOver ? \"bg-[#0dadb7]/10\" : \"\"\n      } ${isEmpty ? \"flex items-center justify-center\" : \"\"}`}\n    >\n      {children}\n    </div>\n  )\n}\n\ninterface StepFourProps {\n  onBack: () => void\n  onNext: () => void\n  campaignData: CampaignData\n  stepOneData: StepOneState\n  data: StepFourState\n  updateData: (data: StepFourState) => void\n}\n\nexport function StepFour({ onBack, onNext, campaignData, stepOneData, data: stepData, updateData }: StepFourProps) {\n  // Convert from parent state format to local AddedBlock format\n  const initializeBlocks = (): AddedBlock[] => {\n    if (stepData.initialized && stepData.blocks.length > 0) {\n      return stepData.blocks.map(b => {\n        const blockDef = buildingBlocks.find(bb => bb.id === b.blockId)\n        return {\n          uid: b.uid,\n          block: blockDef || { \n            id: b.blockId, \n            name: b.name, \n            icon: <FileText className=\"h-4 w-4\" />, \n            category: b.category,\n            hasInput: b.hasInput,\n            inputLabel: b.inputLabel,\n            hasSelect: b.hasSelect,\n            selectLabel: b.selectLabel,\n            selectOptions: b.selectOptions,\n          },\n          inputValue: b.inputValue || \"\",\n          selectValue: b.selectValue || \"\",\n        }\n      })\n    }\n    return []\n  }\n\n  const [addedBlocks, setAddedBlocksLocal] = useState<AddedBlock[]>(initializeBlocks)\n  const [activeId, setActiveId] = useState<string | null>(null)\n  const [activePaletteBlock, setActivePaletteBlock] = useState<BlockType | null>(null)\n  const [overDropZone, setOverDropZone] = useState<string | null>(null)\n  const [isSaving, setIsSaving] = useState(false)\n\n  // Helper to update both local and parent state\n  const setAddedBlocks = (newBlocks: AddedBlock[] | ((prev: AddedBlock[]) => AddedBlock[])) => {\n    const updated = typeof newBlocks === 'function' ? newBlocks(addedBlocks) : newBlocks\n    setAddedBlocksLocal(updated)\n    syncToParent(updated)\n  }\n\n  // Sync local state to parent\n  const syncToParent = (blocks: AddedBlock[]) => {\n    updateData({\n      blocks: blocks.map(b => ({\n        uid: b.uid,\n        blockId: b.block.id,\n        name: b.block.name,\n        category: b.block.category,\n        inputValue: b.inputValue,\n        selectValue: b.selectValue,\n        hasInput: b.block.hasInput,\n        inputLabel: b.block.inputLabel,\n        hasSelect: b.block.hasSelect,\n        selectLabel: b.block.selectLabel,\n        selectOptions: b.block.selectOptions,\n      })),\n      initialized: true,\n    })\n  }\n\n  const sensors = useSensors(\n    useSensor(PointerSensor, {\n      activationConstraint: {\n        distance: 5,\n      },\n    }),\n  )\n\n  const addBlock = (block: BlockType) => {\n    const newBlock: AddedBlock = {\n      uid: Date.now().toString(),\n      block,\n      inputValue: \"\",\n      selectValue: block.selectOptions?.[0] || \"\",\n    }\n    setAddedBlocks([...addedBlocks, newBlock])\n  }\n\n  const removeBlock = (uid: string) => {\n    setAddedBlocks(addedBlocks.filter((b) => b.uid !== uid))\n  }\n\n  const updateBlockInput = (uid: string, value: string) => {\n    setAddedBlocks(addedBlocks.map((b) => (b.uid === uid ? { ...b, inputValue: value } : b)))\n  }\n\n  const updateBlockSelect = (uid: string, value: string) => {\n    setAddedBlocks(addedBlocks.map((b) => (b.uid === uid ? { ...b, selectValue: value } : b)))\n  }\n\n  const handleDragStart = (event: DragStartEvent) => {\n    const { active } = event\n    setActiveId(active.id as string)\n\n    if (active.data.current?.type === \"palette\") {\n      setActivePaletteBlock(active.data.current.block)\n    } else {\n      setActivePaletteBlock(null)\n    }\n  }\n\n  const handleDragOver = (event: DragOverEvent) => {\n    const { over } = event\n    if (over && String(over.id).startsWith(\"drop-zone-\")) {\n      setOverDropZone(over.id as string)\n    } else {\n      setOverDropZone(null)\n    }\n  }\n\n  const handleDragEnd = (event: DragEndEvent) => {\n    const { active, over } = event\n\n    setActiveId(null)\n    setActivePaletteBlock(null)\n    setOverDropZone(null)\n\n    if (!over) return\n\n    if (active.data.current?.type === \"palette\") {\n      const block = active.data.current.block as BlockType\n      const newBlock: AddedBlock = {\n        uid: Date.now().toString(),\n        block,\n        inputValue: \"\",\n        selectValue: block.selectOptions?.[0] || \"\",\n      }\n\n      const overId = String(over.id)\n\n      if (overId.startsWith(\"drop-zone-\")) {\n        const insertIndex = Number.parseInt(overId.replace(\"drop-zone-\", \"\"), 10)\n        const newBlocks = [...addedBlocks]\n        newBlocks.splice(insertIndex, 0, newBlock)\n        setAddedBlocks(newBlocks)\n      } else if (overId === \"structure-drop-area\") {\n        setAddedBlocks([...addedBlocks, newBlock])\n      } else {\n        setAddedBlocks([...addedBlocks, newBlock])\n      }\n    } else {\n      const oldIndex = addedBlocks.findIndex((b) => b.uid === active.id)\n      const newIndex = addedBlocks.findIndex((b) => b.uid === over.id)\n\n      if (oldIndex !== -1 && newIndex !== -1 && oldIndex !== newIndex) {\n        setAddedBlocks(arrayMove(addedBlocks, oldIndex, newIndex))\n      }\n    }\n  }\n\n  const isOverMainArea = overDropZone === null && activeId !== null && activePaletteBlock !== null\n\n  const handleNext = async () => {\n    setIsSaving(true)\n    try {\n      if (campaignData.id) {\n        await fetch(\"/api/save-progress\", {\n          method: \"POST\",\n          headers: { \"Content-Type\": \"application/json\" },\n          body: JSON.stringify({\n            campaignId: campaignData.id,\n            structureBlocks: addedBlocks.map(b => ({\n              blockId: b.block.id,\n              name: b.block.name,\n              inputValue: b.inputValue,\n              selectValue: b.selectValue,\n            })),\n          }),\n        })\n      }\n      onNext()\n    } catch (error) {\n      console.error(\"Failed to save progress:\", error)\n      // Proceed anyway to not block the user\n      onNext()\n    } finally {\n      setIsSaving(false)\n    }\n  }\n\n  return (\n    <DndContext sensors={sensors} onDragStart={handleDragStart} onDragOver={handleDragOver} onDragEnd={handleDragEnd}>\n      <div className=\"space-y-6\">\n        {/* Campaign summary */}\n        <div className=\"rounded-lg border border-border bg-muted/50 px-5 py-4\">\n          <div className=\"flex items-center gap-2 mb-2\">\n            <Globe className=\"h-4 w-4 text-muted-foreground\" />\n            <span className=\"text-sm font-medium text-foreground\">Campaign Summary</span>\n          </div>\n          <div className=\"space-y-2\">\n            {stepOneData.topic && (\n              <p className=\"text-sm text-muted-foreground leading-relaxed\">\n                <span className=\"text-foreground font-medium\">Topic:</span> {stepOneData.topic}\n              </p>\n            )}\n            <div className=\"flex flex-wrap gap-x-6 gap-y-1 text-sm text-muted-foreground\">\n              {stepOneData.niche && (\n                <span>\n                  <span className=\"text-foreground font-medium\">Niche:</span> {stepOneData.niche}\n                </span>\n              )}\n              {stepOneData.country && (\n                <span>\n                  <span className=\"text-foreground font-medium\">Market:</span> {stepOneData.country}\n                </span>\n              )}\n              {stepOneData.length && (\n                <span>\n                  <span className=\"text-foreground font-medium\">Length:</span> {stepOneData.length} words\n                </span>\n              )}\n            </div>\n          </div>\n        </div>\n\n        <div className=\"grid gap-6 lg:grid-cols-[1fr_2fr]\">\n          {/* Left Panel: Block Palette */}\n          <div className=\"space-y-4\">\n            <h3 className=\"font-semibold text-foreground\">Available Blocks</h3>\n            <p className=\"text-xs text-muted-foreground\">Drag blocks to the structure or click + to add</p>\n            <div className=\"rounded-lg bg-[#0dadb7] p-4 space-y-3 max-h-[600px] overflow-y-auto\">\n              {categories.map((category) => (\n                <div key={category} className=\"rounded-md bg-white/95 p-3\">\n                  <p className=\"text-xs font-medium text-[#0dadb7] mb-2\">{category}</p>\n                  <div className=\"flex flex-wrap gap-1.5\">\n                    {buildingBlocks\n                      .filter((b) => b.category === category)\n                      .map((block) => (\n                        <DraggablePaletteBlock key={block.id} block={block} onAdd={() => addBlock(block)} />\n                      ))}\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n\n          {/* Right Panel: Structure Builder */}\n          <div className=\"space-y-4\">\n            <div className=\"flex items-center justify-between\">\n              <h3 className=\"font-semibold text-foreground\">Advertorial Structure</h3>\n              <Badge variant=\"secondary\">{addedBlocks.length} blocks</Badge>\n            </div>\n\n            <div className=\"rounded-lg bg-[#F6F6F6] border border-border p-4\">\n              <DroppableStructureArea isEmpty={addedBlocks.length === 0} isOver={isOverMainArea}>\n                {addedBlocks.length === 0 ? (\n                  <Card\n                    className={`border-dashed border-2 w-full transition-colors bg-white ${isOverMainArea ? \"border-[#0dadb7] bg-[#0dadb7]/10\" : \"\"}`}\n                  >\n                    <CardContent className=\"flex flex-col items-center justify-center py-16 text-center\">\n                      <Layers className=\"h-12 w-12 text-muted-foreground/40 mb-4\" />\n                      <p className=\"text-sm font-medium text-muted-foreground\">\n                        {isOverMainArea ? \"Drop here to add\" : \"No blocks added yet\"}\n                      </p>\n                      <p className=\"text-xs text-muted-foreground mt-1 max-w-[250px]\">\n                        {isOverMainArea\n                          ? \"\"\n                          : \"Drag blocks from the left panel or click + to start building your advertorial structure\"}\n                      </p>\n                    </CardContent>\n                  </Card>\n                ) : (\n                  <SortableContext items={addedBlocks.map((b) => b.uid)} strategy={verticalListSortingStrategy}>\n                    <div className=\"space-y-3\">\n                      {activePaletteBlock && <DropZone id=\"drop-zone-0\" isOver={overDropZone === \"drop-zone-0\"} />}\n\n                      {addedBlocks.map((item, index) => (\n                        <div key={item.uid}>\n                          <SortableStructureBlock\n                            item={item}\n                            index={index}\n                            onRemove={() => removeBlock(item.uid)}\n                            onUpdateInput={(value) => updateBlockInput(item.uid, value)}\n                            onUpdateSelect={(value) => updateBlockSelect(item.uid, value)}\n                          />\n                          {activePaletteBlock && (\n                            <DropZone\n                              id={`drop-zone-${index + 1}`}\n                              isOver={overDropZone === `drop-zone-${index + 1}`}\n                            />\n                          )}\n                        </div>\n                      ))}\n\n                      {activePaletteBlock && !overDropZone && (\n                        <div className=\"h-12 bg-[#0dadb7]/10 border-2 border-dashed border-[#0dadb7]/40 rounded-md flex items-center justify-center\">\n                          <span className=\"text-xs font-medium text-[#0dadb7]\">Drop here</span>\n                        </div>\n                      )}\n                    </div>\n                  </SortableContext>\n                )}\n              </DroppableStructureArea>\n            </div>\n          </div>\n        </div>\n\n        {/* Navigation */}\n        <div className=\"flex justify-between pt-4\">\n          <Button variant=\"outline\" onClick={onBack}>\n            Back\n          </Button>\n          <Button size=\"lg\" disabled={addedBlocks.length === 0 || isSaving} onClick={handleNext}>\n            {isSaving ? (\n              <>\n                <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n                Saving...\n              </>\n            ) : (\n              \"Continue to Insights\"\n            )}\n          </Button>\n        </div>\n      </div>\n\n      <DragOverlay>\n        {activeId && activePaletteBlock ? (\n          <Button\n            variant=\"outline\"\n            size=\"sm\"\n            className=\"h-auto py-1.5 px-2 text-xs bg-white border-[#0dadb7] shadow-lg cursor-grabbing\"\n          >\n            <Plus className=\"mr-1 h-3 w-3 text-[#0dadb7]\" />\n            {activePaletteBlock.name}\n          </Button>\n        ) : null}\n      </DragOverlay>\n    </DndContext>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 5165, "column": 0}, "map": {"version":3,"sources":["file:///Users/wearebrain/Desktop/Manglar%20Media/adv_builder/xevio-adv-builder/components/step-five.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState } from \"react\"\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Textarea } from \"@/components/ui/textarea\"\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\"\nimport {\n  AlertDialog,\n  AlertDialogContent,\n  AlertDialogHeader,\n  AlertDialogTitle,\n  AlertDialogDescription,\n  AlertDialogFooter,\n  AlertDialogCancel,\n  AlertDialogAction,\n} from \"@/components/ui/alert-dialog\"\nimport { Globe, FileText, Target, Link, CheckCircle2, Layers, Pencil, X, Check, AlertTriangle, Loader2 } from \"lucide-react\"\nimport { StepOneState, StepTwoState, StepThreeState, StepFourState, CampaignData } from \"@/lib/types\"\n\ninterface StepFiveProps {\n  onBack: () => void\n  onGenerate: () => void\n  onJumpToStep: (step: number) => void\n  stepOneData: StepOneState\n  stepTwoData: StepTwoState\n  stepThreeData: StepThreeState\n  stepFourData: StepFourState\n  campaignData: CampaignData\n}\n\nfunction ConfirmDialog({\n  isOpen,\n  onClose,\n  onConfirm,\n}: {\n  isOpen: boolean\n  onClose: () => void\n  onConfirm: () => void\n}) {\n  return (\n    <AlertDialog open={isOpen} onOpenChange={(open) => !open && onClose()}>\n      <AlertDialogContent className=\"sm:max-w-[425px]\">\n        <AlertDialogHeader>\n          <div className=\"flex items-start gap-4\">\n            <div className=\"flex h-10 w-10 shrink-0 items-center justify-center rounded-full bg-amber-100 mt-1\">\n              <AlertTriangle className=\"h-5 w-5 text-amber-600\" />\n            </div>\n            <div className=\"flex-1 space-y-2\">\n              <AlertDialogTitle>Change Reference Pages?</AlertDialogTitle>\n              <AlertDialogDescription>\n                Changing the reference pages will trigger the scraping process again. You'll have to choose new insights\n                and build the advertorial again. Are you sure about this?\n              </AlertDialogDescription>\n            </div>\n          </div>\n        </AlertDialogHeader>\n        <AlertDialogFooter>\n          <AlertDialogCancel onClick={onClose}>Cancel</AlertDialogCancel>\n          <AlertDialogAction \n            onClick={onConfirm}\n            className=\"bg-[#4644B6] hover:bg-[#3a38a0]\"\n          >\n            Yes, Change Pages\n          </AlertDialogAction>\n        </AlertDialogFooter>\n      </AlertDialogContent>\n    </AlertDialog>\n  )\n}\n\nfunction EditButton({ onClick }: { onClick: () => void }) {\n  return (\n    <button\n      onClick={onClick}\n      className=\"ml-auto p-1.5 rounded-md hover:bg-[#F6F6F6] text-muted-foreground hover:text-[#4644B6] transition-colors\"\n      title=\"Edit this section\"\n    >\n      <Pencil className=\"h-3.5 w-3.5\" />\n    </button>\n  )\n}\n\nfunction EditActions({ onSave, onCancel }: { onSave: () => void; onCancel: () => void }) {\n  return (\n    <div className=\"flex gap-1 ml-auto\">\n      <button\n        onClick={onCancel}\n        className=\"p-1.5 rounded-md hover:bg-[#F6F6F6] text-muted-foreground hover:text-destructive transition-colors\"\n        title=\"Cancel\"\n      >\n        <X className=\"h-3.5 w-3.5\" />\n      </button>\n      <button\n        onClick={onSave}\n        className=\"p-1.5 rounded-md hover:bg-[#F6F6F6] text-muted-foreground hover:text-[#0dadb7] transition-colors\"\n        title=\"Save\"\n      >\n        <Check className=\"h-3.5 w-3.5\" />\n      </button>\n    </div>\n  )\n}\n\nexport function StepFive({ onBack, onGenerate, onJumpToStep, stepOneData, stepTwoData, stepThreeData, stepFourData, campaignData: initialCampaignData }: StepFiveProps) {\n  const [editingCampaign, setEditingCampaign] = useState(false)\n  const [editingTopic, setEditingTopic] = useState(false)\n  const [showRefWarning, setShowRefWarning] = useState(false)\n  const [isStartingGeneration, setIsStartingGeneration] = useState(false)\n\n  // Use actual data from Step 1\n  const [campaignData, setCampaignData] = useState({\n    campaignType: stepOneData.campaignType || \"Lead Generation\",\n    niche: stepOneData.niche || \"Finance/Insurance\",\n    country: stepOneData.country || \"United Kingdom\",\n    language: stepOneData.language || \"English\",\n    length: stepOneData.length || \"1500\",\n    paragraphLength: stepOneData.paragraphLength || \"Normal (3-4 lines)\",\n    guidelines: stepOneData.guidelines || \"None\",\n    customGuidelines: stepOneData.customGuidelines || \"\",\n  })\n  const [tempCampaignData, setTempCampaignData] = useState(campaignData)\n\n  const [topic, setTopic] = useState(stepOneData.topic || \"\")\n  const [tempTopic, setTempTopic] = useState(topic)\n\n  // Get selected insights from Step 3\n  const selectedInsights = Object.values(stepThreeData.data)\n    .flat()\n    .filter(item => item.selected)\n    .map(item => item.text)\n\n  // Get structure blocks from Step 4\n  const structureBlocks = stepFourData.blocks.map(b => b.name)\n\n  // Get reference URLs from Step 2\n  const referenceUrls = stepTwoData.referenceUrls\n    .filter((ref) => {\n      const url = typeof ref === 'string' ? ref : ref?.url\n      return url && url.trim() !== ''\n    })\n    .map((ref) => {\n      if (typeof ref === 'string') {\n        return { url: ref.trim(), description: null }\n      }\n      return { url: ref.url.trim(), description: ref.description?.trim() || null }\n    })\n\n  const handleCampaignEdit = () => {\n    setTempCampaignData(campaignData)\n    setEditingCampaign(true)\n  }\n\n  const handleCampaignSave = () => {\n    setCampaignData(tempCampaignData)\n    setEditingCampaign(false)\n  }\n\n  const handleCampaignCancel = () => {\n    setTempCampaignData(campaignData)\n    setEditingCampaign(false)\n  }\n\n  const handleTopicEdit = () => {\n    setTempTopic(topic)\n    setEditingTopic(true)\n  }\n\n  const handleTopicSave = () => {\n    setTopic(tempTopic)\n    setEditingTopic(false)\n  }\n\n  const handleTopicCancel = () => {\n    setTempTopic(topic)\n    setEditingTopic(false)\n  }\n\n  const handleGenerateClick = async () => {\n    setIsStartingGeneration(true)\n    try {\n      if (initialCampaignData.id) {\n        await fetch(\"/api/generate\", {\n          method: \"POST\",\n          headers: { \"Content-Type\": \"application/json\" },\n          body: JSON.stringify({\n            campaignId: initialCampaignData.id,\n            stepOneData,\n            stepTwoData,\n            stepThreeData,\n            stepFourData,\n            stepFiveData: {\n              campaignData, // Current edited campaign data\n              topic, // Current edited topic\n            }\n          }),\n        })\n      }\n      onGenerate()\n    } catch (error) {\n      console.error(\"Failed to start generation:\", error)\n      // Proceed anyway to let parent handle view switch, or show error\n      onGenerate() \n    } finally {\n      setIsStartingGeneration(false)\n    }\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <ConfirmDialog\n        isOpen={showRefWarning}\n        onClose={() => setShowRefWarning(false)}\n        onConfirm={() => {\n          setShowRefWarning(false)\n          onJumpToStep(2)\n        }}\n      />\n\n      <div className=\"bg-[#4644B6] rounded-lg px-6 py-4 flex items-center justify-between\">\n        <div>\n          <h2 className=\"text-xl font-semibold text-white\">Review your request</h2>\n          <p className=\"text-white/80 text-sm\">Confirm the details below before generating</p>\n        </div>\n        <div className=\"hidden sm:flex items-center gap-2 text-white/60 text-sm\">\n          <CheckCircle2 className=\"h-5 w-5\" />\n          <span>Almost there</span>\n        </div>\n      </div>\n\n      <div className=\"grid gap-4 md:grid-cols-2\">\n        <Card>\n          <CardHeader className=\"pb-3\">\n            <CardTitle className=\"text-base flex items-center gap-2\">\n              <FileText className=\"h-4 w-4 text-[#0dadb7]\" />\n              Advertorial Topic\n              {editingTopic ? (\n                <EditActions onSave={handleTopicSave} onCancel={handleTopicCancel} />\n              ) : (\n                <EditButton onClick={handleTopicEdit} />\n              )}\n            </CardTitle>\n          </CardHeader>\n          <CardContent className=\"px-6\">\n            {editingTopic ? (\n              <Textarea\n                className=\"min-h-[100px] text-sm resize-y\"\n                value={tempTopic}\n                onChange={(e) => setTempTopic(e.target.value)}\n              />\n            ) : (\n              <p className=\"text-sm text-muted-foreground leading-relaxed\">{topic}</p>\n            )}\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"pb-3\">\n            <CardTitle className=\"text-base flex items-center gap-2\">\n              <Globe className=\"h-4 w-4 text-[#0dadb7]\" />\n              Campaign Setup\n              {editingCampaign ? (\n                <EditActions onSave={handleCampaignSave} onCancel={handleCampaignCancel} />\n              ) : (\n                <EditButton onClick={handleCampaignEdit} />\n              )}\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            {editingCampaign ? (\n              <div className=\"space-y-3\">\n                <div className=\"flex items-center gap-2\">\n                  <span className=\"text-xs text-muted-foreground w-24 shrink-0\">Campaign Type</span>\n                  <Select\n                    value={tempCampaignData.campaignType}\n                    onValueChange={(v) => setTempCampaignData({ ...tempCampaignData, campaignType: v })}\n                  >\n                    <SelectTrigger className=\"h-8 text-xs\">\n                      <SelectValue />\n                    </SelectTrigger>\n                    <SelectContent className=\"text-xs\">\n                      <SelectItem className=\"text-xs\" value=\"Lead Generation\">\n                        Lead Generation\n                      </SelectItem>\n                      <SelectItem className=\"text-xs\" value=\"E-commerce\">\n                        E-commerce\n                      </SelectItem>\n                    </SelectContent>\n                  </Select>\n                </div>\n                <div className=\"flex items-center gap-2\">\n                  <span className=\"text-xs text-muted-foreground w-24 shrink-0\">Niche</span>\n                  <Select\n                    value={tempCampaignData.niche}\n                    onValueChange={(v) => setTempCampaignData({ ...tempCampaignData, niche: v })}\n                  >\n                    <SelectTrigger className=\"h-8 text-xs\">\n                      <SelectValue />\n                    </SelectTrigger>\n                    <SelectContent className=\"text-xs\">\n                      <SelectItem className=\"text-xs\" value=\"Beauty\">\n                        Beauty\n                      </SelectItem>\n                      <SelectItem className=\"text-xs\" value=\"Education\">\n                        Education\n                      </SelectItem>\n                      <SelectItem className=\"text-xs\" value=\"Fashion/Clothing\">\n                        Fashion/Clothing\n                      </SelectItem>\n                      <SelectItem className=\"text-xs\" value=\"Finance/Insurance\">\n                        Finance/Insurance\n                      </SelectItem>\n                      <SelectItem className=\"text-xs\" value=\"Gaming\">\n                        Gaming\n                      </SelectItem>\n                      <SelectItem className=\"text-xs\" value=\"Health Supplements\">\n                        Health Supplements\n                      </SelectItem>\n                      <SelectItem className=\"text-xs\" value=\"Home Improvement\">\n                        Home Improvement\n                      </SelectItem>\n                      <SelectItem className=\"text-xs\" value=\"Medical\">\n                        Medical\n                      </SelectItem>\n                      <SelectItem className=\"text-xs\" value=\"Tech/Gadgets\">\n                        Tech/Gadgets\n                      </SelectItem>\n                      <SelectItem className=\"text-xs\" value=\"Weight Loss\">\n                        Weight Loss\n                      </SelectItem>\n                    </SelectContent>\n                  </Select>\n                </div>\n                <div className=\"flex items-center gap-2\">\n                  <span className=\"text-xs text-muted-foreground w-24 shrink-0\">Country</span>\n                  <Select\n                    value={tempCampaignData.country}\n                    onValueChange={(v) => setTempCampaignData({ ...tempCampaignData, country: v })}\n                  >\n                    <SelectTrigger className=\"h-8 text-xs\">\n                      <SelectValue />\n                    </SelectTrigger>\n                    <SelectContent className=\"text-xs\">\n                      <SelectItem className=\"text-xs\" value=\"United States\">\n                        United States\n                      </SelectItem>\n                      <SelectItem className=\"text-xs\" value=\"United Kingdom\">\n                        United Kingdom\n                      </SelectItem>\n                      <SelectItem className=\"text-xs\" value=\"Canada\">\n                        Canada\n                      </SelectItem>\n                    </SelectContent>\n                  </Select>\n                </div>\n                <div className=\"flex items-center gap-2\">\n                  <span className=\"text-xs text-muted-foreground w-24 shrink-0\">Language</span>\n                  <Select\n                    value={tempCampaignData.language}\n                    onValueChange={(v) => setTempCampaignData({ ...tempCampaignData, language: v })}\n                  >\n                    <SelectTrigger className=\"h-8 text-xs\">\n                      <SelectValue />\n                    </SelectTrigger>\n                    <SelectContent className=\"text-xs\">\n                      <SelectItem className=\"text-xs\" value=\"English\">\n                        English\n                      </SelectItem>\n                    </SelectContent>\n                  </Select>\n                </div>\n                <div className=\"flex items-center gap-2\">\n                  <span className=\"text-xs text-muted-foreground w-24 shrink-0\">Length</span>\n                  <Input\n                    type=\"number\"\n                    className=\"h-8 max-w-[120px] !text-xs\"\n                    value={tempCampaignData.length}\n                    onChange={(e) => setTempCampaignData({ ...tempCampaignData, length: e.target.value })}\n                  />\n                </div>\n                <div className=\"flex items-center gap-2\">\n                  <span className=\"text-xs text-muted-foreground w-24 shrink-0\">Paragraphs</span>\n                  <Select\n                    value={tempCampaignData.paragraphLength}\n                    onValueChange={(v) => setTempCampaignData({ ...tempCampaignData, paragraphLength: v })}\n                  >\n                    <SelectTrigger className=\"h-8 text-xs\">\n                      <SelectValue />\n                    </SelectTrigger>\n                    <SelectContent className=\"text-xs\">\n                      <SelectItem className=\"text-xs\" value=\"Very Short (1 sentence)\">\n                        Very Short (1 sentence)\n                      </SelectItem>\n                      <SelectItem className=\"text-xs\" value=\"Short (1-3 lines)\">\n                        Short (1-3 lines)\n                      </SelectItem>\n                      <SelectItem className=\"text-xs\" value=\"Normal (3-4 lines)\">\n                        Normal (3-4 lines)\n                      </SelectItem>\n                      <SelectItem className=\"text-xs\" value=\"Long (4-6 lines)\">\n                        Long (4-6 lines)\n                      </SelectItem>\n                    </SelectContent>\n                  </Select>\n                </div>\n                <div className=\"space-y-2\">\n                  <div className=\"flex items-center gap-2\">\n                    <span className=\"text-xs text-muted-foreground w-24 shrink-0\">Guidelines</span>\n                    <Select\n                      value={tempCampaignData.guidelines}\n                      onValueChange={(v) => setTempCampaignData({ \n                        ...tempCampaignData, \n                        guidelines: v,\n                        customGuidelines: v === \"Custom\" ? tempCampaignData.customGuidelines : \"\"\n                      })}\n                    >\n                      <SelectTrigger className=\"h-8 text-xs\">\n                        <SelectValue />\n                      </SelectTrigger>\n                      <SelectContent className=\"text-xs\">\n                        <SelectItem className=\"text-xs\" value=\"None\">\n                          None\n                        </SelectItem>\n                        <SelectItem className=\"text-xs\" value=\"ERGO\">\n                          ERGO\n                        </SelectItem>\n                        <SelectItem className=\"text-xs\" value=\"Custom\">\n                          Custom\n                        </SelectItem>\n                      </SelectContent>\n                    </Select>\n                  </div>\n                  {tempCampaignData.guidelines === \"Custom\" && (\n                    <div className=\"flex items-start gap-2\">\n                      <span className=\"text-xs text-muted-foreground w-24 shrink-0 pt-2\">Custom</span>\n                      <Textarea\n                        placeholder=\"Enter custom compliance guidelines...\"\n                        className=\"min-h-[80px] resize-y text-xs\"\n                        value={tempCampaignData.customGuidelines || \"\"}\n                        onChange={(e) => setTempCampaignData({ ...tempCampaignData, customGuidelines: e.target.value })}\n                      />\n                    </div>\n                  )}\n                </div>\n              </div>\n            ) : (\n              <div className=\"space-y-2\">\n                <div className=\"flex items-center gap-2\">\n                  <span className=\"text-xs text-muted-foreground w-24 shrink-0\">Campaign Type</span>\n                  <span className=\"inline-flex items-center rounded-md bg-[#F6F6F6] px-2.5 py-1 text-xs font-medium text-muted-foreground\">\n                    {campaignData.campaignType}\n                  </span>\n                </div>\n                <div className=\"flex items-center gap-2\">\n                  <span className=\"text-xs text-muted-foreground w-24 shrink-0\">Niche</span>\n                  <span className=\"inline-flex items-center rounded-md bg-[#F6F6F6] px-2.5 py-1 text-xs font-medium text-muted-foreground\">\n                    {campaignData.niche}\n                  </span>\n                </div>\n                <div className=\"flex items-center gap-2\">\n                  <span className=\"text-xs text-muted-foreground w-24 shrink-0\">Country</span>\n                  <span className=\"inline-flex items-center rounded-md bg-[#F6F6F6] px-2.5 py-1 text-xs font-medium text-muted-foreground\">\n                    {campaignData.country}\n                  </span>\n                </div>\n                <div className=\"flex items-center gap-2\">\n                  <span className=\"text-xs text-muted-foreground w-24 shrink-0\">Language</span>\n                  <span className=\"inline-flex items-center rounded-md bg-[#F6F6F6] px-2.5 py-1 text-xs font-medium text-muted-foreground\">\n                    {campaignData.language}\n                  </span>\n                </div>\n                <div className=\"flex items-center gap-2\">\n                  <span className=\"text-xs text-muted-foreground w-24 shrink-0\">Length</span>\n                  <span className=\"inline-flex items-center rounded-md bg-[#F6F6F6] px-2.5 py-1 text-xs font-medium text-muted-foreground\">\n                    {campaignData.length} words\n                  </span>\n                </div>\n                <div className=\"flex items-center gap-2\">\n                  <span className=\"text-xs text-muted-foreground w-24 shrink-0\">Paragraphs</span>\n                  <span className=\"inline-flex items-center rounded-md bg-[#F6F6F6] px-2.5 py-1 text-xs font-medium text-muted-foreground\">\n                    {campaignData.paragraphLength}\n                  </span>\n                </div>\n                {campaignData.guidelines !== \"None\" && (\n                  <div className=\"flex items-start gap-2\">\n                    <span className=\"text-xs text-muted-foreground w-24 shrink-0 pt-1\">Guidelines</span>\n                    <div className=\"flex-1\">\n                      {campaignData.guidelines === \"Custom\" && campaignData.customGuidelines ? (\n                        <div className=\"rounded-md bg-[#F6F6F6] px-2.5 py-1.5 text-xs font-medium text-muted-foreground whitespace-pre-wrap\">\n                          {campaignData.customGuidelines}\n                        </div>\n                      ) : (\n                        <span className=\"inline-flex items-center rounded-md bg-[#F6F6F6] px-2.5 py-1 text-xs font-medium text-muted-foreground\">\n                          {campaignData.guidelines}\n                        </span>\n                      )}\n                    </div>\n                  </div>\n                )}\n              </div>\n            )}\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"pb-3\">\n            <CardTitle className=\"text-base flex items-center gap-2\">\n              <Link className=\"h-4 w-4 text-[#0dadb7]\" />\n              Reference Pages\n              <EditButton onClick={() => setShowRefWarning(true)} />\n            </CardTitle>\n          </CardHeader>\n          <CardContent className=\"space-y-2\">\n            {referenceUrls.length > 0 ? (\n              referenceUrls.map((ref, index) => (\n                <div key={index} className=\"space-y-1\">\n                  <div className=\"flex items-center gap-2 text-sm\">\n                    <CheckCircle2 className=\"h-4 w-4 text-[#0dadb7] shrink-0\" />\n                    <span className=\"text-muted-foreground truncate\">{ref.url.replace(/^https?:\\/\\//, '')}</span>\n                  </div>\n                  {ref.description && (\n                    <p className=\"text-xs text-muted-foreground ml-6 italic\">{ref.description}</p>\n                  )}\n                </div>\n              ))\n            ) : (\n              <p className=\"text-sm text-muted-foreground\">No reference pages added</p>\n            )}\n          </CardContent>\n        </Card>\n\n        {/* Selected Insights */}\n        <Card>\n          <CardHeader className=\"pb-3\">\n            <CardTitle className=\"text-base flex items-center gap-2\">\n              <Target className=\"h-4 w-4 text-[#0dadb7]\" />\n              Selected Insights\n              <EditButton onClick={() => onJumpToStep(4)} />\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"flex flex-wrap gap-2\">\n              {selectedInsights.length > 0 ? (\n                selectedInsights.map((insight, index) => (\n                  <span \n                    key={index}\n                    className=\"inline-flex items-center rounded-md bg-[#F6F6F6] px-2.5 py-1 text-xs font-medium text-muted-foreground\"\n                  >\n                    {insight.length > 50 ? `${insight.substring(0, 50)}...` : insight}\n                  </span>\n                ))\n              ) : (\n                <p className=\"text-sm text-muted-foreground\">No insights selected</p>\n              )}\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Structure Preview */}\n      <Card>\n        <CardHeader className=\"pb-3\">\n          <CardTitle className=\"text-base flex items-center gap-2\">\n            <Layers className=\"h-4 w-4 text-[#0dadb7]\" />\n            Advertorial Structure\n            <span className=\"inline-flex items-center rounded-md bg-[#F6F6F6] px-2.5 py-1 text-xs font-medium text-muted-foreground\">\n              {structureBlocks.length} blocks\n            </span>\n            <EditButton onClick={() => onJumpToStep(3)} />\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"flex flex-col gap-2\">\n            {structureBlocks.length > 0 ? (\n              structureBlocks.map((block, index) => (\n                <div key={index} className=\"flex items-center gap-3 rounded-md bg-[#F6F6F6] px-3 py-2\">\n                  <span className=\"flex h-6 w-6 shrink-0 items-center justify-center rounded-full bg-[#0dadb7] text-xs font-medium text-white\">\n                    {index + 1}\n                  </span>\n                  <span className=\"text-sm font-medium text-muted-foreground\">{block}</span>\n                </div>\n              ))\n            ) : (\n              <p className=\"text-sm text-muted-foreground py-4 text-center\">No blocks added to structure</p>\n            )}\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Navigation */}\n      <div className=\"flex justify-between pt-4\">\n        <Button variant=\"outline\" onClick={onBack}>\n          Back to Edit\n        </Button>\n        <Button \n          size=\"lg\" \n          className=\"bg-[#4644B6] hover:bg-[#3a38a0]\" \n          onClick={handleGenerateClick}\n          disabled={isStartingGeneration}\n        >\n          {isStartingGeneration ? (\n            <>\n              <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n              Starting...\n            </>\n          ) : (\n            \"Generate Advertorial\"\n          )}\n        </Button>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 6762, "column": 0}, "map": {"version":3,"sources":["file:///Users/wearebrain/Desktop/Manglar%20Media/adv_builder/xevio-adv-builder/components/step-generating.tsx"],"sourcesContent":["\"use client\"\n\nimport { Loader2, FileText, CheckCircle2, ExternalLink } from \"lucide-react\"\nimport { Button } from \"@/components/ui/button\"\nimport { Card, CardContent } from \"@/components/ui/card\"\n\ninterface StepGeneratingProps {\n  onComplete: () => void\n  status: 'generating' | 'completed'\n  documentUrl?: string\n  documentName?: string\n  topic?: string\n}\n\nexport function StepGenerating({ onComplete, status = 'generating', documentUrl, documentName, topic }: StepGeneratingProps) {\n  \n  if (status === 'generating') {\n    return (\n      <div className=\"flex flex-col items-center justify-center py-24\">\n        <div className=\"relative mb-8\">\n          <div className=\"absolute inset-0 rounded-full bg-[#4644B6]/20 animate-ping\" />\n          <div className=\"relative flex h-20 w-20 items-center justify-center rounded-full bg-[#4644B6]\">\n            <Loader2 className=\"h-10 w-10 text-white animate-spin\" />\n          </div>\n        </div>\n        <h2 className=\"text-xl font-semibold text-foreground mb-2\">Generating Your Advertorial</h2>\n        <p className=\"text-muted-foreground text-center max-w-md\">Be patient, the writer is working on it...</p>\n        <div className=\"mt-8 flex items-center gap-2 text-sm text-muted-foreground\">\n          <FileText className=\"h-4 w-4\" />\n          <span>Creating content for: {topic ? (topic.length > 40 ? topic.substring(0, 40) + '...' : topic) : 'New Campaign'}</span>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"flex flex-col items-center justify-center py-16\">\n      <div className=\"mb-8\">\n        <div className=\"flex h-20 w-20 items-center justify-center rounded-full bg-[#0dadb7]\">\n          <CheckCircle2 className=\"h-10 w-10 text-white\" />\n        </div>\n      </div>\n      <h2 className=\"text-2xl font-semibold text-foreground mb-2\">Advertorial Ready!</h2>\n      <p className=\"text-muted-foreground text-center max-w-md mb-8\">\n        Your advertorial has been generated and is ready for review in Google Docs.\n      </p>\n\n      <Card className=\"w-full max-w-md border-[#0dadb7]/30 bg-[#0dadb7]/5\">\n        <CardContent className=\"p-6\">\n          <div className=\"flex items-start gap-4\">\n            <div className=\"flex h-12 w-12 shrink-0 items-center justify-center rounded-lg bg-white border border-border\">\n              <svg className=\"h-6 w-6\" viewBox=\"0 0 24 24\" fill=\"none\">\n                <path\n                  d=\"M14 2H6C5.46957 2 4.96086 2.21071 4.58579 2.58579C4.21071 2.96086 4 3.46957 4 4V20C4 20.5304 4.21071 21.0391 4.58579 21.4142C4.96086 21.7893 5.46957 22 6 22H18C18.5304 22 19.0391 21.7893 19.4142 21.4142C19.7893 21.0391 20 20.5304 20 20V8L14 2Z\"\n                  stroke=\"#4285F4\"\n                  strokeWidth=\"2\"\n                  strokeLinecap=\"round\"\n                  strokeLinejoin=\"round\"\n                />\n                <path d=\"M14 2V8H20\" stroke=\"#4285F4\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\n                <path d=\"M8 13H16\" stroke=\"#4285F4\" strokeWidth=\"2\" strokeLinecap=\"round\" />\n                <path d=\"M8 17H16\" stroke=\"#4285F4\" strokeWidth=\"2\" strokeLinecap=\"round\" />\n                <path d=\"M8 9H10\" stroke=\"#4285F4\" strokeWidth=\"2\" strokeLinecap=\"round\" />\n              </svg>\n            </div>\n            <div className=\"flex-1 min-w-0\">\n              <p className=\"font-medium text-foreground\">{documentName || \"Generated Advertorial\"}</p>\n              <p className=\"text-sm text-muted-foreground mt-0.5\">Google Docs</p>\n              <p className=\"text-xs text-muted-foreground mt-1\">Created just now</p>\n            </div>\n          </div>\n\n          <Button className=\"w-full mt-4 bg-[#4644B6] hover:bg-[#3a38a0]\" asChild>\n            <a\n              href={documentUrl || \"#\"}\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n            >\n              <ExternalLink className=\"mr-2 h-4 w-4\" />\n              Open in Google Docs\n            </a>\n          </Button>\n        </CardContent>\n      </Card>\n\n      <Button variant=\"outline\" className=\"mt-6 bg-transparent\" onClick={onComplete}>\n        Create Another Advertorial\n      </Button>\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AAAA;AAAA;AACA;AACA;AAJA;;;;;AAcO,SAAS,eAAe,EAAE,UAAU,EAAE,SAAS,YAAY,EAAE,WAAW,EAAE,YAAY,EAAE,KAAK,EAAuB;IAEzH,IAAI,WAAW,cAAc;QAC3B,qBACE,6LAAC;YAAI,WAAU;;8BACb,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BAAI,WAAU;;;;;;sCACf,6LAAC;4BAAI,WAAU;sCACb,cAAA,6LAAC,+NAAO;gCAAC,WAAU;;;;;;;;;;;;;;;;;8BAGvB,6LAAC;oBAAG,WAAU;8BAA6C;;;;;;8BAC3D,6LAAC;oBAAE,WAAU;8BAA6C;;;;;;8BAC1D,6LAAC;oBAAI,WAAU;;sCACb,6LAAC,6NAAQ;4BAAC,WAAU;;;;;;sCACpB,6LAAC;;gCAAK;gCAAuB,QAAS,MAAM,MAAM,GAAG,KAAK,MAAM,SAAS,CAAC,GAAG,MAAM,QAAQ,QAAS;;;;;;;;;;;;;;;;;;;IAI5G;IAEA,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC;oBAAI,WAAU;8BACb,cAAA,6LAAC,wOAAY;wBAAC,WAAU;;;;;;;;;;;;;;;;0BAG5B,6LAAC;gBAAG,WAAU;0BAA8C;;;;;;0BAC5D,6LAAC;gBAAE,WAAU;0BAAkD;;;;;;0BAI/D,6LAAC,oIAAI;gBAAC,WAAU;0BACd,cAAA,6LAAC,2IAAW;oBAAC,WAAU;;sCACrB,6LAAC;4BAAI,WAAU;;8CACb,6LAAC;oCAAI,WAAU;8CACb,cAAA,6LAAC;wCAAI,WAAU;wCAAU,SAAQ;wCAAY,MAAK;;0DAChD,6LAAC;gDACC,GAAE;gDACF,QAAO;gDACP,aAAY;gDACZ,eAAc;gDACd,gBAAe;;;;;;0DAEjB,6LAAC;gDAAK,GAAE;gDAAa,QAAO;gDAAU,aAAY;gDAAI,eAAc;gDAAQ,gBAAe;;;;;;0DAC3F,6LAAC;gDAAK,GAAE;gDAAW,QAAO;gDAAU,aAAY;gDAAI,eAAc;;;;;;0DAClE,6LAAC;gDAAK,GAAE;gDAAW,QAAO;gDAAU,aAAY;gDAAI,eAAc;;;;;;0DAClE,6LAAC;gDAAK,GAAE;gDAAU,QAAO;gDAAU,aAAY;gDAAI,eAAc;;;;;;;;;;;;;;;;;8CAGrE,6LAAC;oCAAI,WAAU;;sDACb,6LAAC;4CAAE,WAAU;sDAA+B,gBAAgB;;;;;;sDAC5D,6LAAC;4CAAE,WAAU;sDAAuC;;;;;;sDACpD,6LAAC;4CAAE,WAAU;sDAAqC;;;;;;;;;;;;;;;;;;sCAItD,6LAAC,wIAAM;4BAAC,WAAU;4BAA8C,OAAO;sCACrE,cAAA,6LAAC;gCACC,MAAM,eAAe;gCACrB,QAAO;gCACP,KAAI;;kDAEJ,6LAAC,yOAAY;wCAAC,WAAU;;;;;;oCAAiB;;;;;;;;;;;;;;;;;;;;;;;0BAOjD,6LAAC,wIAAM;gBAAC,SAAQ;gBAAU,WAAU;gBAAsB,SAAS;0BAAY;;;;;;;;;;;;AAKrF;KA5EgB"}},
    {"offset": {"line": 7084, "column": 0}, "map": {"version":3,"sources":["file:///Users/wearebrain/Desktop/Manglar%20Media/adv_builder/xevio-adv-builder/components/history-menu.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState, useEffect } from \"react\"\nimport { X, FileText, ExternalLink, Clock, Loader2 } from \"lucide-react\"\nimport { Button } from \"@/components/ui/button\"\n\ninterface HistoryMenuProps {\n  isOpen: boolean\n  onClose: () => void\n  userId: string | null\n}\n\ninterface CampaignHistory {\n  id: string\n  title: string\n  campaignType: string\n  niche: string\n  country: string\n  createdAt: string\n  docUrl: string\n}\n\nexport function HistoryMenu({ isOpen, onClose, userId }: HistoryMenuProps) {\n  const [campaigns, setCampaigns] = useState<CampaignHistory[]>([])\n  const [isLoading, setIsLoading] = useState(false)\n  const [isLoadingMore, setIsLoadingMore] = useState(false)\n  const [hasMore, setHasMore] = useState(false)\n  const [total, setTotal] = useState(0)\n  const [offset, setOffset] = useState(0)\n\n  // Fetch history when menu opens\n  useEffect(() => {\n    if (isOpen && userId) {\n      fetchHistory(true)\n    }\n  }, [isOpen, userId])\n\n  // Reset state when menu closes\n  useEffect(() => {\n    if (!isOpen) {\n      setCampaigns([])\n      setOffset(0)\n      setHasMore(false)\n      setTotal(0)\n    }\n  }, [isOpen])\n\n  const fetchHistory = async (reset: boolean = false) => {\n    if (!userId) return\n\n    const currentOffset = reset ? 0 : offset\n    \n    if (reset) {\n      setIsLoading(true)\n    } else {\n      setIsLoadingMore(true)\n    }\n\n    try {\n      const response = await fetch(`/api/history?userId=${userId}&offset=${currentOffset}`)\n      const data = await response.json()\n\n      if (response.ok) {\n        if (reset) {\n          setCampaigns(data.campaigns)\n        } else {\n          setCampaigns((prev) => [...prev, ...data.campaigns])\n        }\n        setHasMore(data.hasMore)\n        setTotal(data.total)\n        setOffset(currentOffset + data.campaigns.length)\n      } else {\n        console.error('Failed to fetch history:', data.error)\n      }\n    } catch (error) {\n      console.error('Error fetching history:', error)\n    } finally {\n      setIsLoading(false)\n      setIsLoadingMore(false)\n    }\n  }\n\n  const handleLoadMore = () => {\n    fetchHistory(false)\n  }\n\n  if (!isOpen) return null\n\n  return (\n    <>\n      {/* Backdrop */}\n      <div className=\"fixed inset-0 bg-black/20 z-40\" onClick={onClose} />\n\n      {/* Side Panel */}\n      <div className=\"fixed top-0 right-0 h-full w-[400px] max-w-[90vw] bg-card border-l border-border shadow-xl z-50 flex flex-col\">\n        {/* Header */}\n        <div className=\"flex items-center justify-between p-4 border-b border-border\">\n          <div className=\"flex items-center gap-2\">\n            <Clock className=\"h-5 w-5 text-[#0dadb7]\" />\n            <h2 className=\"text-lg font-semibold\">Request History</h2>\n          </div>\n          <Button variant=\"ghost\" size=\"icon\" onClick={onClose}>\n            <X className=\"h-5 w-5\" />\n          </Button>\n        </div>\n\n        {/* Request List */}\n        <div className=\"flex-1 overflow-y-auto p-4 space-y-3\">\n          {isLoading ? (\n            <div className=\"flex flex-col items-center justify-center py-12\">\n              <Loader2 className=\"h-6 w-6 animate-spin text-[#0dadb7]\" />\n              <p className=\"text-sm text-muted-foreground mt-2\">Loading history...</p>\n            </div>\n          ) : campaigns.length === 0 ? (\n            <div className=\"flex flex-col items-center justify-center py-12 text-center\">\n              <FileText className=\"h-10 w-10 text-muted-foreground/40 mb-3\" />\n              <p className=\"text-sm font-medium text-muted-foreground\">No completed campaigns yet</p>\n              <p className=\"text-xs text-muted-foreground mt-1\">\n                Your generated advertorials will appear here\n              </p>\n            </div>\n          ) : (\n            <>\n              {campaigns.map((campaign) => (\n                <div key={campaign.id} className=\"bg-[#F6F6F6] rounded-lg p-4 space-y-3\">\n                  <div className=\"flex items-start justify-between gap-2\">\n                    <div className=\"flex items-center gap-2\">\n                      <FileText className=\"h-4 w-4 text-[#0dadb7] shrink-0\" />\n                      <span className=\"font-medium text-sm\">{campaign.title}</span>\n                    </div>\n                  </div>\n\n                  <div className=\"grid grid-cols-2 gap-x-4 gap-y-1 text-xs text-muted-foreground\">\n                    <div>\n                      Type: <span className=\"text-foreground\">{campaign.campaignType}</span>\n                    </div>\n                    <div>\n                      Niche: <span className=\"text-foreground\">{campaign.niche}</span>\n                    </div>\n                    <div>\n                      Country: <span className=\"text-foreground\">{campaign.country}</span>\n                    </div>\n                    <div>\n                      Created: <span className=\"text-foreground\">{campaign.createdAt}</span>\n                    </div>\n                  </div>\n\n                  <a\n                    href={campaign.docUrl}\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                    className=\"flex items-center gap-2 text-sm text-[#4644B6] hover:underline font-medium\"\n                  >\n                    <ExternalLink className=\"h-4 w-4\" />\n                    Open Google Doc\n                  </a>\n                </div>\n              ))}\n\n              {/* Load More Button */}\n              {hasMore && (\n                <div className=\"pt-2\">\n                  <Button\n                    variant=\"outline\"\n                    className=\"w-full bg-transparent\"\n                    onClick={handleLoadMore}\n                    disabled={isLoadingMore}\n                  >\n                    {isLoadingMore ? (\n                      <>\n                        <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n                        Loading...\n                      </>\n                    ) : (\n                      `Load More (${campaigns.length} of ${total})`\n                    )}\n                  </Button>\n                </div>\n              )}\n            </>\n          )}\n        </div>\n      </div>\n    </>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 7484, "column": 0}, "map": {"version":3,"sources":["file:///Users/wearebrain/Desktop/Manglar%20Media/adv_builder/xevio-adv-builder/components/user-menu.tsx"],"sourcesContent":["\"use client\"\n\nimport { X, LogOut, User } from \"lucide-react\"\nimport { Button } from \"@/components/ui/button\"\n\ninterface UserMenuProps {\n  isOpen: boolean\n  onClose: () => void\n  onLogout: () => void\n  userEmail: string\n}\n\nexport function UserMenu({ isOpen, onClose, onLogout, userEmail }: UserMenuProps) {\n  if (!isOpen) return null\n\n  return (\n    <>\n      {/* Backdrop */}\n      <div className=\"fixed inset-0 bg-black/20 z-40\" onClick={onClose} />\n\n      {/* Side Panel */}\n      <div className=\"fixed top-0 right-0 h-full w-[320px] max-w-[90vw] bg-card border-l border-border shadow-xl z-50 flex flex-col\">\n        {/* Header */}\n        <div className=\"flex items-center justify-between p-4 border-b border-border\">\n          <div className=\"flex items-center gap-2\">\n            <User className=\"h-5 w-5 text-[#0dadb7]\" />\n            <h2 className=\"text-lg font-semibold\">Account</h2>\n          </div>\n          <Button variant=\"ghost\" size=\"icon\" onClick={onClose}>\n            <X className=\"h-5 w-5\" />\n          </Button>\n        </div>\n\n        {/* User Info */}\n        <div className=\"flex-1 p-4\">\n          <div className=\"bg-[#F6F6F6] rounded-lg p-4 space-y-3\">\n            <div className=\"flex items-center gap-3\">\n              <div className=\"h-10 w-10 rounded-full bg-[#0dadb7]/20 flex items-center justify-center\">\n                <User className=\"h-5 w-5 text-[#0dadb7]\" />\n              </div>\n              <div>\n                <p className=\"text-sm font-medium text-foreground\">Signed in as</p>\n                <p className=\"text-sm text-muted-foreground\">{userEmail}</p>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Footer with Logout */}\n        <div className=\"p-4 border-t border-border\">\n          <Button\n            variant=\"outline\"\n            className=\"w-full justify-start gap-2 text-muted-foreground hover:text-foreground bg-transparent\"\n            onClick={onLogout}\n          >\n            <LogOut className=\"h-4 w-4\" />\n            Sign Out\n          </Button>\n        </div>\n      </div>\n    </>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AAAA;AACA;AAHA;;;;AAYO,SAAS,SAAS,EAAE,MAAM,EAAE,OAAO,EAAE,QAAQ,EAAE,SAAS,EAAiB;IAC9E,IAAI,CAAC,QAAQ,OAAO;IAEpB,qBACE;;0BAEE,6LAAC;gBAAI,WAAU;gBAAiC,SAAS;;;;;;0BAGzD,6LAAC;gBAAI,WAAU;;kCAEb,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAI,WAAU;;kDACb,6LAAC,6MAAI;wCAAC,WAAU;;;;;;kDAChB,6LAAC;wCAAG,WAAU;kDAAwB;;;;;;;;;;;;0CAExC,6LAAC,wIAAM;gCAAC,SAAQ;gCAAQ,MAAK;gCAAO,SAAS;0CAC3C,cAAA,6LAAC,oMAAC;oCAAC,WAAU;;;;;;;;;;;;;;;;;kCAKjB,6LAAC;wBAAI,WAAU;kCACb,cAAA,6LAAC;4BAAI,WAAU;sCACb,cAAA,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCAAI,WAAU;kDACb,cAAA,6LAAC,6MAAI;4CAAC,WAAU;;;;;;;;;;;kDAElB,6LAAC;;0DACC,6LAAC;gDAAE,WAAU;0DAAsC;;;;;;0DACnD,6LAAC;gDAAE,WAAU;0DAAiC;;;;;;;;;;;;;;;;;;;;;;;;;;;;kCAOtD,6LAAC;wBAAI,WAAU;kCACb,cAAA,6LAAC,wIAAM;4BACL,SAAQ;4BACR,WAAU;4BACV,SAAS;;8CAET,6LAAC,uNAAM;oCAAC,WAAU;;;;;;gCAAY;;;;;;;;;;;;;;;;;;;;AAO1C;KAlDgB"}},
    {"offset": {"line": 7667, "column": 0}, "map": {"version":3,"sources":["file:///Users/wearebrain/Desktop/Manglar%20Media/adv_builder/xevio-adv-builder/lib/auth.ts"],"sourcesContent":["import { supabase } from './supabase'\nimport type { User, Session } from '@supabase/supabase-js'\n\nexport interface AuthState {\n  user: User | null\n  session: Session | null\n  isLoading: boolean\n}\n\n/**\n * Sign in with email and password\n */\nexport async function signIn(email: string, password: string) {\n  const { data, error } = await supabase.auth.signInWithPassword({\n    email,\n    password,\n  })\n\n  if (error) {\n    throw error\n  }\n\n  return data\n}\n\n/**\n * Sign out the current user\n */\nexport async function signOut() {\n  const { error } = await supabase.auth.signOut()\n  \n  if (error) {\n    throw error\n  }\n}\n\n/**\n * Get the current session\n */\nexport async function getSession() {\n  const { data: { session }, error } = await supabase.auth.getSession()\n  \n  if (error) {\n    throw error\n  }\n\n  return session\n}\n\n/**\n * Get the current user\n */\nexport async function getUser() {\n  const { data: { user }, error } = await supabase.auth.getUser()\n  \n  if (error) {\n    throw error\n  }\n\n  return user\n}\n\n/**\n * Subscribe to auth state changes\n */\nexport function onAuthStateChange(callback: (session: Session | null) => void) {\n  const { data: { subscription } } = supabase.auth.onAuthStateChange((_event, session) => {\n    callback(session)\n  })\n\n  return subscription\n}\n\n"],"names":[],"mappings":";;;;;;;;;;;;AAAA;;AAYO,eAAe,OAAO,KAAa,EAAE,QAAgB;IAC1D,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,8HAAQ,CAAC,IAAI,CAAC,kBAAkB,CAAC;QAC7D;QACA;IACF;IAEA,IAAI,OAAO;QACT,MAAM;IACR;IAEA,OAAO;AACT;AAKO,eAAe;IACpB,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,8HAAQ,CAAC,IAAI,CAAC,OAAO;IAE7C,IAAI,OAAO;QACT,MAAM;IACR;AACF;AAKO,eAAe;IACpB,MAAM,EAAE,MAAM,EAAE,OAAO,EAAE,EAAE,KAAK,EAAE,GAAG,MAAM,8HAAQ,CAAC,IAAI,CAAC,UAAU;IAEnE,IAAI,OAAO;QACT,MAAM;IACR;IAEA,OAAO;AACT;AAKO,eAAe;IACpB,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,EAAE,KAAK,EAAE,GAAG,MAAM,8HAAQ,CAAC,IAAI,CAAC,OAAO;IAE7D,IAAI,OAAO;QACT,MAAM;IACR;IAEA,OAAO;AACT;AAKO,SAAS,kBAAkB,QAA2C;IAC3E,MAAM,EAAE,MAAM,EAAE,YAAY,EAAE,EAAE,GAAG,8HAAQ,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC,QAAQ;QAC1E,SAAS;IACX;IAEA,OAAO;AACT"}},
    {"offset": {"line": 7724, "column": 0}, "map": {"version":3,"sources":["file:///Users/wearebrain/Desktop/Manglar%20Media/adv_builder/xevio-adv-builder/components/login-screen.tsx"],"sourcesContent":["\"use client\"\n\nimport type React from \"react\"\nimport { useState } from \"react\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Label } from \"@/components/ui/label\"\nimport { Card, CardContent, CardHeader } from \"@/components/ui/card\"\nimport { Loader2 } from \"lucide-react\"\nimport { signIn } from \"@/lib/auth\"\n\ninterface LoginScreenProps {\n  onLogin: (email: string) => void\n}\n\nexport function LoginScreen({ onLogin }: LoginScreenProps) {\n  const [email, setEmail] = useState(\"\")\n  const [password, setPassword] = useState(\"\")\n  const [isLoading, setIsLoading] = useState(false)\n  const [error, setError] = useState<string | null>(null)\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n    setError(null)\n    setIsLoading(true)\n\n    try {\n      const data = await signIn(email, password)\n      if (data.user) {\n        onLogin(data.user.email || email)\n      }\n    } catch (err: any) {\n      console.error('Login error:', err)\n      setError(err.message || 'Invalid email or password')\n    } finally {\n      setIsLoading(false)\n    }\n  }\n\n  return (\n    <div className=\"min-h-screen bg-background flex items-center justify-center p-6\">\n      <Card className=\"w-full max-w-md\">\n        <CardHeader className=\"text-center space-y-4 pb-2\">\n          <div className=\"flex justify-center\">\n            <img src=\"/images/xevio-color.svg\" alt=\"Xevio\" className=\"h-12 w-12\" />\n          </div>\n          <div>\n            <h1 className=\"text-2xl font-semibold text-foreground\">Advertorial Builder</h1>\n            <p className=\"text-sm text-muted-foreground mt-1\">Sign in to continue</p>\n          </div>\n        </CardHeader>\n        <CardContent className=\"pt-6\">\n          <form onSubmit={handleSubmit} className=\"space-y-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"email\">Email</Label>\n              <Input\n                id=\"email\"\n                type=\"email\"\n                placeholder=\"you@example.com\"\n                value={email}\n                onChange={(e) => setEmail(e.target.value)}\n                disabled={isLoading}\n                required\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"password\">Password</Label>\n              <Input\n                id=\"password\"\n                type=\"password\"\n                placeholder=\"\"\n                value={password}\n                onChange={(e) => setPassword(e.target.value)}\n                disabled={isLoading}\n                required\n              />\n            </div>\n            \n            {error && (\n              <div className=\"text-sm text-destructive bg-destructive/10 px-3 py-2 rounded-md\">\n                {error}\n              </div>\n            )}\n            \n            <Button \n              type=\"submit\" \n              className=\"w-full bg-[#4644B6] hover:bg-[#4644B6]/90 text-white\"\n              disabled={isLoading}\n            >\n              {isLoading ? (\n                <>\n                  <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n                  Signing in...\n                </>\n              ) : (\n                \"Sign In\"\n              )}\n            </Button>\n          </form>\n        </CardContent>\n      </Card>\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;;AATA;;;;;;;;AAeO,SAAS,YAAY,EAAE,OAAO,EAAoB;;IACvD,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAC;IACnC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,yKAAQ,EAAC;IACzC,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAC;IAC3C,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAgB;IAElD,MAAM,eAAe,OAAO;QAC1B,EAAE,cAAc;QAChB,SAAS;QACT,aAAa;QAEb,IAAI;YACF,MAAM,OAAO,MAAM,IAAA,wHAAM,EAAC,OAAO;YACjC,IAAI,KAAK,IAAI,EAAE;gBACb,QAAQ,KAAK,IAAI,CAAC,KAAK,IAAI;YAC7B;QACF,EAAE,OAAO,KAAU;YACjB,QAAQ,KAAK,CAAC,gBAAgB;YAC9B,SAAS,IAAI,OAAO,IAAI;QAC1B,SAAU;YACR,aAAa;QACf;IACF;IAEA,qBACE,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC,oIAAI;YAAC,WAAU;;8BACd,6LAAC,0IAAU;oBAAC,WAAU;;sCACpB,6LAAC;4BAAI,WAAU;sCACb,cAAA,6LAAC;gCAAI,KAAI;gCAA0B,KAAI;gCAAQ,WAAU;;;;;;;;;;;sCAE3D,6LAAC;;8CACC,6LAAC;oCAAG,WAAU;8CAAyC;;;;;;8CACvD,6LAAC;oCAAE,WAAU;8CAAqC;;;;;;;;;;;;;;;;;;8BAGtD,6LAAC,2IAAW;oBAAC,WAAU;8BACrB,cAAA,6LAAC;wBAAK,UAAU;wBAAc,WAAU;;0CACtC,6LAAC;gCAAI,WAAU;;kDACb,6LAAC,sIAAK;wCAAC,SAAQ;kDAAQ;;;;;;kDACvB,6LAAC,sIAAK;wCACJ,IAAG;wCACH,MAAK;wCACL,aAAY;wCACZ,OAAO;wCACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;wCACxC,UAAU;wCACV,QAAQ;;;;;;;;;;;;0CAGZ,6LAAC;gCAAI,WAAU;;kDACb,6LAAC,sIAAK;wCAAC,SAAQ;kDAAW;;;;;;kDAC1B,6LAAC,sIAAK;wCACJ,IAAG;wCACH,MAAK;wCACL,aAAY;wCACZ,OAAO;wCACP,UAAU,CAAC,IAAM,YAAY,EAAE,MAAM,CAAC,KAAK;wCAC3C,UAAU;wCACV,QAAQ;;;;;;;;;;;;4BAIX,uBACC,6LAAC;gCAAI,WAAU;0CACZ;;;;;;0CAIL,6LAAC,wIAAM;gCACL,MAAK;gCACL,WAAU;gCACV,UAAU;0CAET,0BACC;;sDACE,6LAAC,+NAAO;4CAAC,WAAU;;;;;;wCAA8B;;mDAInD;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQhB;GAxFgB;KAAA"}},
    {"offset": {"line": 7951, "column": 0}, "map": {"version":3,"sources":["file:///Users/wearebrain/Desktop/Manglar%20Media/adv_builder/xevio-adv-builder/app/page.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState, useEffect } from \"react\"\nimport { StepIndicator } from \"@/components/step-indicator\"\nimport { StepOne } from \"@/components/step-one\"\nimport { StepTwo } from \"@/components/step-two\"\nimport { StepThree } from \"@/components/step-three\"\nimport { StepFour } from \"@/components/step-four\"\nimport { StepFive } from \"@/components/step-five\"\nimport { StepGenerating } from \"@/components/step-generating\"\nimport { HistoryMenu } from \"@/components/history-menu\"\nimport { UserMenu } from \"@/components/user-menu\"\nimport { LoginScreen } from \"@/components/login-screen\"\nimport { Clock, User, Loader2 } from \"lucide-react\"\nimport { StepOneState, StepTwoState, StepThreeState, StepFourState, CampaignData } from \"@/lib/types\"\nimport { supabase } from \"@/lib/supabase\"\nimport { getSession, signOut, onAuthStateChange } from \"@/lib/auth\"\n\nexport default function AdvertorialBuilder() {\n  const [isLoggedIn, setIsLoggedIn] = useState(false)\n  const [isCheckingAuth, setIsCheckingAuth] = useState(true)\n  const [userEmail, setUserEmail] = useState<string>(\"\")\n  const [userId, setUserId] = useState<string | null>(null)\n  const [currentStep, setCurrentStep] = useState(1)\n  const [isLoading, setIsLoading] = useState(false)\n  const [isGenerating, setIsGenerating] = useState(false)\n  const [isHistoryMenuOpen, setIsHistoryMenuOpen] = useState(false)\n  const [isUserMenuOpen, setIsUserMenuOpen] = useState(false)\n\n  const [campaignData, setCampaignData] = useState<CampaignData>({})\n\n  const [stepOneData, setStepOneData] = useState<StepOneState>({\n    topic: \"\",\n    campaignType: \"\",\n    niche: \"\",\n    country: \"\",\n    language: \"\",\n    length: \"\",\n    paragraphLength: \"\",\n    guidelines: \"\",\n  })\n\n  const [stepTwoData, setStepTwoData] = useState<StepTwoState>({\n    referenceUrls: [{ url: \"\", description: \"\" }],\n  })\n\n  const [stepThreeData, setStepThreeData] = useState<StepThreeState>({\n    data: { usps: [], pricing: [], mainAngle: [], toneOfVoice: [], keyHooks: [] },\n    initialized: false,\n  })\n\n  const [stepFourData, setStepFourData] = useState<StepFourState>({\n    blocks: [],\n    initialized: false,\n  })\n\n  // Check for existing session on mount\n  useEffect(() => {\n    const checkSession = async () => {\n      try {\n        const session = await getSession()\n        if (session?.user) {\n          setIsLoggedIn(true)\n          setUserEmail(session.user.email || \"\")\n          setUserId(session.user.id)\n        }\n      } catch (error) {\n        console.error(\"Error checking session:\", error)\n      } finally {\n        setIsCheckingAuth(false)\n      }\n    }\n\n    checkSession()\n\n    // Subscribe to auth state changes\n    const subscription = onAuthStateChange((session) => {\n      if (session?.user) {\n        setIsLoggedIn(true)\n        setUserEmail(session.user.email || \"\")\n        setUserId(session.user.id)\n      } else {\n        setIsLoggedIn(false)\n        setUserEmail(\"\")\n        setUserId(null)\n      }\n    })\n\n    return () => {\n      subscription.unsubscribe()\n    }\n  }, [])\n\n  const handleLogin = (email: string) => {\n    setUserEmail(email)\n    setIsLoggedIn(true)\n  }\n\n  const handleLogout = async () => {\n    try {\n      await signOut()\n      setIsLoggedIn(false)\n      setUserEmail(\"\")\n      setUserId(null)\n      setCurrentStep(1)\n      setIsUserMenuOpen(false)\n      // Reset all form data\n      setCampaignData({})\n      setStepOneData({\n        topic: \"\",\n        campaignType: \"\",\n        niche: \"\",\n        country: \"\",\n        language: \"\",\n        length: \"\",\n        paragraphLength: \"\",\n        guidelines: \"\",\n      })\n      setStepTwoData({ referenceUrls: [{ url: \"\", description: \"\" }] })\n      setStepThreeData({\n        data: { usps: [], pricing: [], mainAngle: [], toneOfVoice: [], keyHooks: [] },\n        initialized: false,\n      })\n      setStepFourData({ blocks: [], initialized: false })\n      setIsGenerating(false)\n    } catch (error) {\n      console.error(\"Error signing out:\", error)\n    }\n  }\n\n  const handleNextStep = () => {\n    if (currentStep < 5) {\n      setCurrentStep(currentStep + 1)\n    }\n  }\n\n  const handlePrevStep = () => {\n    if (currentStep > 1) {\n      setCurrentStep(currentStep - 1)\n    }\n  }\n\n  const handleGenerate = () => {\n    setIsGenerating(true)\n  }\n\n  const handleStartOver = () => {\n    setIsGenerating(false)\n    setCurrentStep(1)\n    setCampaignData({})\n    // Reset form data for new campaign\n    setStepOneData({\n      topic: \"\",\n      campaignType: \"\",\n      niche: \"\",\n      country: \"\",\n      language: \"\",\n      length: \"\",\n      paragraphLength: \"\",\n      guidelines: \"\",\n    })\n    setStepTwoData({ referenceUrls: [\"\"] })\n    setStepThreeData({\n      data: { usps: [], pricing: [], mainAngle: [], toneOfVoice: [], keyHooks: [] },\n      initialized: false,\n    })\n    setStepFourData({ blocks: [], initialized: false })\n  }\n\n  const handleJumpToStep = (step: number) => {\n    setCurrentStep(step)\n  }\n\n  // Listen for campaign updates when generating\n  useEffect(() => {\n    if (isGenerating && campaignData.id) {\n      const channel = supabase\n        .channel(`campaign-generating-${campaignData.id}`)\n        .on(\n          'postgres_changes',\n          {\n            event: 'UPDATE',\n            schema: 'public',\n            table: 'campaigns',\n            filter: `id=eq.${campaignData.id}`,\n          },\n          (payload) => {\n            const newStatus = payload.new.status\n            const generatedContent = payload.new.generated_content\n            const docName = payload.new.doc_name\n            \n            // Update local state if status changed or content arrived\n            if (newStatus && newStatus !== campaignData.status) {\n              setCampaignData((prev) => ({\n                ...prev,\n                status: newStatus,\n                generated_content: generatedContent || prev.generated_content,\n                doc_name: docName || prev.doc_name,\n              }))\n            } else if (generatedContent && generatedContent !== campaignData.generated_content) {\n               setCampaignData((prev) => ({\n                ...prev,\n                generated_content: generatedContent,\n                doc_name: docName || prev.doc_name,\n              }))\n            }\n          }\n        )\n        .subscribe()\n\n      return () => {\n        supabase.removeChannel(channel)\n      }\n    }\n  }, [isGenerating, campaignData.id, campaignData.status, campaignData.generated_content])\n\n  // Show loading spinner while checking auth\n  if (isCheckingAuth) {\n    return (\n      <div className=\"min-h-screen bg-background flex items-center justify-center\">\n        <div className=\"flex flex-col items-center gap-4\">\n          <Loader2 className=\"h-8 w-8 animate-spin text-[#4644B6]\" />\n          <p className=\"text-sm text-muted-foreground\">Loading...</p>\n        </div>\n      </div>\n    )\n  }\n\n  // Show login screen if not logged in\n  if (!isLoggedIn) {\n    return <LoginScreen onLogin={handleLogin} />\n  }\n\n  const header = (\n    <header className=\"border-b border-border bg-card\">\n      <div className=\"mx-auto max-w-6xl px-6 py-4\">\n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex items-center gap-3\">\n            <img src=\"/images/xevio-color.svg\" alt=\"Xevio\" className=\"h-8 w-8\" />\n            <span className=\"text-lg font-semibold text-foreground\">Advertorial Builder</span>\n          </div>\n          <div className=\"flex items-center gap-2\">\n            <button\n              className=\"p-2 rounded-md hover:bg-muted text-muted-foreground\"\n              onClick={() => setIsHistoryMenuOpen(true)}\n              title=\"Request History\"\n            >\n              <Clock className=\"h-5 w-5\" />\n            </button>\n            <button\n              className=\"p-2 rounded-md hover:bg-muted text-muted-foreground\"\n              onClick={() => setIsUserMenuOpen(true)}\n              title=\"Account\"\n            >\n              <User className=\"h-5 w-5\" />\n            </button>\n          </div>\n        </div>\n      </div>\n    </header>\n  )\n\n  if (isGenerating) {\n    return (\n      <div className=\"min-h-screen bg-background\">\n        {header}\n        <HistoryMenu isOpen={isHistoryMenuOpen} onClose={() => setIsHistoryMenuOpen(false)} userId={userId} />\n        <UserMenu\n          isOpen={isUserMenuOpen}\n          onClose={() => setIsUserMenuOpen(false)}\n          onLogout={handleLogout}\n          userEmail={userEmail}\n        />\n        <main className=\"mx-auto max-w-5xl px-6 py-8\">\n          <StepGenerating \n            onComplete={handleStartOver} \n            status={campaignData.generated_content ? 'completed' : 'generating'}\n            documentUrl={campaignData.generated_content}\n            documentName={campaignData.doc_name}\n            topic={stepOneData.topic}\n          />\n        </main>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      {header}\n      <HistoryMenu isOpen={isHistoryMenuOpen} onClose={() => setIsHistoryMenuOpen(false)} userId={userId} />\n      <UserMenu\n        isOpen={isUserMenuOpen}\n        onClose={() => setIsUserMenuOpen(false)}\n        onLogout={handleLogout}\n        userEmail={userEmail}\n      />\n      <div className=\"border-b border-border bg-card/50 py-6\">\n        <div className=\"mx-auto max-w-6xl px-6\">\n          <StepIndicator currentStep={currentStep} />\n        </div>\n      </div>\n      <main className=\"mx-auto max-w-5xl px-6 py-8\">\n        {currentStep === 1 && (\n          <StepOne \n            data={stepOneData} \n            updateData={setStepOneData} \n            onNext={handleNextStep} \n          />\n        )}\n        {currentStep === 2 && (\n          <StepTwo\n            stepOneData={stepOneData}\n            data={stepTwoData}\n            updateData={setStepTwoData}\n            onNext={handleNextStep}\n            onBack={handlePrevStep}\n            isLoading={isLoading}\n            onCampaignCreated={(data) => setCampaignData(data)}\n            userId={userId}\n          />\n        )}\n        {currentStep === 3 && (\n          <StepFour \n            onBack={handlePrevStep} \n            onNext={handleNextStep} \n            campaignData={campaignData}\n            stepOneData={stepOneData}\n            data={stepFourData}\n            updateData={setStepFourData}\n          />\n        )}\n        {currentStep === 4 && (\n          <StepThree \n            onBack={handlePrevStep} \n            onNext={handleNextStep}\n            campaignData={campaignData}\n            updateCampaignData={setCampaignData}\n            data={stepThreeData}\n            updateData={setStepThreeData}\n          />\n        )}\n        {currentStep === 5 && (\n          <StepFive \n            onBack={handlePrevStep} \n            onGenerate={handleGenerate} \n            onJumpToStep={handleJumpToStep}\n            stepOneData={stepOneData}\n            stepTwoData={stepTwoData}\n            stepThreeData={stepThreeData}\n            stepFourData={stepFourData}\n            campaignData={campaignData}\n          />\n        )}\n      </main>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}}]
}