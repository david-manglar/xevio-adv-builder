{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///Users/wearebrain/Desktop/Manglar%20Media/adv_builder/xevio-adv-builder/app/api/save-progress/route.ts"],"sourcesContent":["import { NextResponse } from 'next/server'\nimport { createClient } from '@supabase/supabase-js'\n\nexport async function POST(request: Request) {\n  try {\n    const body = await request.json()\n    const { campaignId, selectedInsights, structureBlocks } = body\n\n    if (!campaignId) {\n      return NextResponse.json({ error: 'Campaign ID is required' }, { status: 400 })\n    }\n\n    const supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL!\n    const supabaseKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!\n    const supabase = createClient(supabaseUrl, supabaseKey)\n\n    // Build the update object dynamically based on what's provided\n    const updateData: Record<string, any> = {}\n    \n    if (selectedInsights !== undefined) {\n      updateData.selected_insights = selectedInsights\n    }\n    \n    if (structureBlocks !== undefined) {\n      updateData.structure_blocks = structureBlocks\n    }\n\n    if (Object.keys(updateData).length === 0) {\n      return NextResponse.json({ error: 'No data to update' }, { status: 400 })\n    }\n\n    const { error: dbError } = await supabase\n      .from('campaigns')\n      .update(updateData)\n      .eq('id', campaignId)\n\n    if (dbError) {\n      console.error('Supabase Error:', dbError)\n      return NextResponse.json({ error: 'Failed to save progress' }, { status: 500 })\n    }\n\n    return NextResponse.json({ success: true })\n\n  } catch (error) {\n    console.error('API Error:', error)\n    return NextResponse.json({ error: 'Internal Server Error' }, { status: 500 })\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,eAAe,KAAK,OAAgB;IACzC,IAAI;QACF,MAAM,OAAO,MAAM,QAAQ,IAAI;QAC/B,MAAM,EAAE,UAAU,EAAE,gBAAgB,EAAE,eAAe,EAAE,GAAG;QAE1D,IAAI,CAAC,YAAY;YACf,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAA0B,GAAG;gBAAE,QAAQ;YAAI;QAC/E;QAEA,MAAM;QACN,MAAM;QACN,MAAM,WAAW,IAAA,gMAAY,EAAC,aAAa;QAE3C,+DAA+D;QAC/D,MAAM,aAAkC,CAAC;QAEzC,IAAI,qBAAqB,WAAW;YAClC,WAAW,iBAAiB,GAAG;QACjC;QAEA,IAAI,oBAAoB,WAAW;YACjC,WAAW,gBAAgB,GAAG;QAChC;QAEA,IAAI,OAAO,IAAI,CAAC,YAAY,MAAM,KAAK,GAAG;YACxC,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAoB,GAAG;gBAAE,QAAQ;YAAI;QACzE;QAEA,MAAM,EAAE,OAAO,OAAO,EAAE,GAAG,MAAM,SAC9B,IAAI,CAAC,aACL,MAAM,CAAC,YACP,EAAE,CAAC,MAAM;QAEZ,IAAI,SAAS;YACX,QAAQ,KAAK,CAAC,mBAAmB;YACjC,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAA0B,GAAG;gBAAE,QAAQ;YAAI;QAC/E;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,SAAS;QAAK;IAE3C,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,cAAc;QAC5B,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAwB,GAAG;YAAE,QAAQ;QAAI;IAC7E;AACF"}}]
}