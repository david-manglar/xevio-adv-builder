{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///Users/wearebrain/Desktop/Manglar%20Media/adv_builder/xevio-adv-builder/app/api/campaign/%5Bid%5D/route.ts"],"sourcesContent":["import { NextResponse } from 'next/server'\nimport { createClient } from '@supabase/supabase-js'\n\nexport async function GET(\n  request: Request,\n  { params }: { params: Promise<{ id: string }> }\n) {\n  try {\n    const { id } = await params\n\n    if (!id) {\n      return NextResponse.json({ error: 'Campaign ID is required' }, { status: 400 })\n    }\n\n    const supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL!\n    const supabaseKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!\n    const supabase = createClient(supabaseUrl, supabaseKey)\n\n    // Fetch complete campaign details\n    const { data: campaign, error } = await supabase\n      .from('campaigns')\n      .select(`\n        id,\n        topic,\n        campaign_type,\n        niche,\n        country,\n        language,\n        length,\n        paragraph_length,\n        guidelines,\n        reference_urls,\n        selected_insights,\n        structure_blocks,\n        generated_content,\n        doc_name,\n        status,\n        created_at\n      `)\n      .eq('id', id)\n      .single()\n\n    if (error) {\n      console.error('Supabase Error:', error)\n      return NextResponse.json({ error: 'Failed to fetch campaign' }, { status: 500 })\n    }\n\n    if (!campaign) {\n      return NextResponse.json({ error: 'Campaign not found' }, { status: 404 })\n    }\n\n    // Format the response\n    const formattedCampaign = {\n      id: campaign.id,\n      topic: campaign.topic || '',\n      campaignType: campaign.campaign_type || '',\n      niche: campaign.niche || '',\n      country: campaign.country || '',\n      language: campaign.language || '',\n      length: campaign.length || '',\n      paragraphLength: campaign.paragraph_length || '',\n      guidelines: campaign.guidelines || '',\n      referenceUrls: campaign.reference_urls || [],\n      selectedInsights: campaign.selected_insights || {},\n      structureBlocks: campaign.structure_blocks || [],\n      generatedContent: campaign.generated_content || '',\n      docName: campaign.doc_name || '',\n      status: campaign.status || '',\n      createdAt: campaign.created_at || '',\n    }\n\n    return NextResponse.json({ campaign: formattedCampaign })\n\n  } catch (error) {\n    console.error('API Error:', error)\n    return NextResponse.json({ error: 'Internal Server Error' }, { status: 500 })\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,eAAe,IACpB,OAAgB,EAChB,EAAE,MAAM,EAAuC;IAE/C,IAAI;QACF,MAAM,EAAE,EAAE,EAAE,GAAG,MAAM;QAErB,IAAI,CAAC,IAAI;YACP,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAA0B,GAAG;gBAAE,QAAQ;YAAI;QAC/E;QAEA,MAAM;QACN,MAAM;QACN,MAAM,WAAW,IAAA,gMAAY,EAAC,aAAa;QAE3C,kCAAkC;QAClC,MAAM,EAAE,MAAM,QAAQ,EAAE,KAAK,EAAE,GAAG,MAAM,SACrC,IAAI,CAAC,aACL,MAAM,CAAC,CAAC;;;;;;;;;;;;;;;;;MAiBT,CAAC,EACA,EAAE,CAAC,MAAM,IACT,MAAM;QAET,IAAI,OAAO;YACT,QAAQ,KAAK,CAAC,mBAAmB;YACjC,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAA2B,GAAG;gBAAE,QAAQ;YAAI;QAChF;QAEA,IAAI,CAAC,UAAU;YACb,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAqB,GAAG;gBAAE,QAAQ;YAAI;QAC1E;QAEA,sBAAsB;QACtB,MAAM,oBAAoB;YACxB,IAAI,SAAS,EAAE;YACf,OAAO,SAAS,KAAK,IAAI;YACzB,cAAc,SAAS,aAAa,IAAI;YACxC,OAAO,SAAS,KAAK,IAAI;YACzB,SAAS,SAAS,OAAO,IAAI;YAC7B,UAAU,SAAS,QAAQ,IAAI;YAC/B,QAAQ,SAAS,MAAM,IAAI;YAC3B,iBAAiB,SAAS,gBAAgB,IAAI;YAC9C,YAAY,SAAS,UAAU,IAAI;YACnC,eAAe,SAAS,cAAc,IAAI,EAAE;YAC5C,kBAAkB,SAAS,iBAAiB,IAAI,CAAC;YACjD,iBAAiB,SAAS,gBAAgB,IAAI,EAAE;YAChD,kBAAkB,SAAS,iBAAiB,IAAI;YAChD,SAAS,SAAS,QAAQ,IAAI;YAC9B,QAAQ,SAAS,MAAM,IAAI;YAC3B,WAAW,SAAS,UAAU,IAAI;QACpC;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,UAAU;QAAkB;IAEzD,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,cAAc;QAC5B,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAwB,GAAG;YAAE,QAAQ;QAAI;IAC7E;AACF"}}]
}